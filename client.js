/*! wiki-client - v0.23.1 - 2021-10-03
 * Copyright 2021 Ward Cunningham and other contributors;
 * Released under the MIT license */
!function r(o,i,a){function u(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){"use strict";console.log("Window Name: "+window.name),window.name=window.location.host,window.wiki=e("./lib/wiki"),e("./lib/legacy"),e("./lib/bind"),e("./lib/plugins")},{"./lib/bind":5,"./lib/legacy":14,"./lib/plugins":24,"./lib/wiki":38}],2:[function(e,t,n){"use strict";var r={create:"☼",add:"+",edit:"✎",fork:"⚑",move:"↕",remove:"✕"};t.exports={symbols:r,fork:r.fork,add:r.add}},{}],3:[function(e,t,n){"use strict";var c,s,r;t.exports=c={},c.scrollContainer=void 0,s=function(){var e=$("body, html").filter(function(){return 0<$(this).scrollLeft()});return 0<e.length?e:$("body, html").scrollLeft(12).filter(function(){return 0<$(this).scrollLeft()}).scrollTop(0)},r=function(e){var t,n,r,o,i,a,u;if(null!=e.position())return null==c.scrollContainer&&(c.scrollContainer=s()),t=$("body").width(),r=(o=c.scrollContainer.scrollLeft())+t,a=e.position().left,u=e.outerWidth(!0),n=$(".page").outerWidth(!0)*$(".page").length,a<o?i=a:r<a+u?i=a-(t-u):r>$(".pages").outerWidth()&&(i=Math.min(a,n-t)),c.scrollContainer.animate({scrollLeft:i},function(){if(!$.contains(e[0],document.activeElement))return e.focus()})},c.set=function(e,t){if($(".incremental-search").remove(),e=$(e),$(".active").removeClass("active"),e.addClass("active"),!t)return r(e)}},{}],4:[function(e,t,n){"use strict";var i=e("./util"),a=e("./actionSymbols");t.exports=function(e,t){var n,r=e.parents(".page:first"),o="";if(null!=t.site&&(o+="".concat(t.site,"\n")),o+=t.type||"separator",null!=t.date&&(o+=" ".concat(i.formatElapsedTime(t.date))),n=$('<a href="#" /> ').addClass("action").addClass(t.type||"separator").text(t.symbol||a.symbols[t.type]).attr("title",o).attr("data-id",t.id||"0").data("action",t),0<(o=e.children(".control-buttons")).length?n.insertBefore(o):n.appendTo(e),"fork"===t.type&&null!=t.site)return n.css("background-image","url(".concat(wiki.site(t.site).flag())).attr("href","".concat(wiki.site(t.site).getDirectURL(r.attr("id")),".html")).attr("target","".concat(t.site)).data("site",t.site).data("slug",r.attr("id"))}},{"./actionSymbols":2,"./util":37}],5:[function(e,t,n){"use strict";var r=e("./neighborhood"),o=e("./neighbors"),i=e("./searchbox"),a=e("./state"),u=e("./link");$(function(){return i.inject(r),i.bind(),o.inject(r),o.bind(),window.seedNeighbors&&seedNeighbors.split(",").forEach(function(e){return r.registerNeighbor(e.trim())}),a.inject(u)})},{"./link":17,"./neighborhood":18,"./neighbors":19,"./searchbox":31,"./state":34}],6:[function(e,t,n){"use strict";var r=e("./resolve"),o=null,i=function(){return o=$("<div></div>").html("This dialog will show every time!").dialog({autoOpen:!1,title:"Basic Dialog",height:600,width:800})},e=function(e,t){return o.html(t),o.dialog("option","title",r.resolveLinks(e)),o.dialog("open")};t.exports={emit:i,open:e}},{"./resolve":28}],7:[function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=[].indexOf,a=e("url"),u=function(e){return null!=(e=e.originalEvent.dataTransfer)&&0<=i.call(e.types,"Files")?e.files[0]:null},c=function(e){var t;return null!=(e=e.originalEvent.dataTransfer)&&null!=e.types&&(0<=i.call(e.types,"text/uri-list")||0<=i.call(e.types,"text/x-moz-url"))&&null!=(t=e.getData("URL"))&&t.length?t:null},s=function(e){if(n=e.match(/^https?:\/\/([a-zA-Z0-9:.-]+)(\/([a-zA-Z0-9:.-]+)\/([a-z0-9-]+(_rev\d+)?))+$/)){var t={},e=r(n,6),n=(e[0],e[1]);return e[2],t.site=e[3],t.slug=e[4],e[5],"view"!==(e=t.site)&&"local"!==e&&"origin"!==e||(t.site=n),t}return null},l=function(e){return a.parse(e,!0,!0).pathname.match(/\.(jpg|jpeg|png|svg)$/i)?e:null},f=function(e){var t=a.parse(e,!0,!0);try{"video"===t.query.source&&(t=a.parse(t.query.url,!0,!0))}catch(e){0}switch(t.hostname){case"www.youtube.com":return null!=t.query.list?{text:"YOUTUBE PLAYLIST ".concat(t.query.list)}:{text:"YOUTUBE ".concat(t.query.v)};case"youtu.be":return null!=t.query.list?{text:"YOUTUBE PLAYLIST ".concat(t.query.list)}:{text:"YOUTUBE ".concat(t.pathname.substr(1))};case"vimeo.com":return{text:"VIMEO ".concat(t.pathname.substr(1))};case"archive.org":return{text:"ARCHIVE ".concat(t.pathname.substr(t.pathname.lastIndexOf("/")+1))};case"tedxtalks.ted.com":return{text:"TEDX ".concat(t.pathname.substr(t.pathname.lastIndexOf("/")+1))};case"www.ted.com":return{text:"TED ".concat(t.pathname.substr(t.pathname.lastIndexOf("/")+1))};default:return null}},e=function(i){return function(t){var e,n,r,o=function(e){return t.preventDefault(),t.stopPropagation()};if(n=c(t)){if((r=s(n))&&null!=(e=i.page))return o(e(r));if((r=f(n))&&null!=(e=i.video))return o(e(r));if((r=l(n))&&null!=(e=i.image))return o(e(r));r={url:n}}if(n=u(t)){if(null!=(e=i.file))return o(e(n));r={file:n}}if(null!=(e=i.punt))return o(e(r=r||{dt:t.dataTransfer,types:null!=(e=t.dataTransfer)?e.types:void 0}))}};t.exports={dispatch:e}},{url:54}],8:[function(e,t,n){"use strict";var o=e("./plugin"),f=e("./itemz"),i=e("./pageHandler"),d=e("./link"),a=e("./random"),h=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},p=function(a,u){var c,s,e,t,n,r,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(console.log("textEditor",u.id,l),"markdown"===u.type&&(s=0),$(".editEnable").is(":visible")&&(t=function(e){var t,n,r,o,i;return 27===e.which||(e.ctrlKey||e.metaKey)&&83===e.which?(e.preventDefault(),c.focusout(),!1):(e.ctrlKey||e.metaKey)&&73===e.which?(e.preventDefault(),e.shiftKey||(t=$(e.target).parents(".page")),d.doInternalLink("about ".concat(u.type," plugin"),t),!1):(e.ctrlKey||e.metaKey)&&77===e.which?(e.preventDefault(),a.removeClass(u.type).addClass(u.type="factory"),c.focusout(),!1):"paragraph"===u.type||"markdown"===u.type?(r=v(c),e.which===$.ui.keyCode.BACKSPACE&&0===r.start&&r.start===r.end?(t=a.prev(),(n=f.getItem(t)).type!==u.type||(i=n[l.field||"text"].length,o=c.val(),c.val(""),p(t,n,{caret:i,suffix:o})),!1):e.which===$.ui.keyCode.ENTER?!!r&&("markdown"===u.type&&s++,"paragraph"===u.type||"markdown"===u.type&&2===s?(n=a.parents(".page"),e=(i=c.val()).substring(0,r.start),o=i.substring(r.end),""===e?(c.val(o),c.focusout(),g(n,a.prev(),u.type,e)):(c.val(e),c.focusout(),g(n,a,u.type,o)),!1):void 0):"markdown"===u.type?s=0:void 0):void 0},e=function(){var e;if(a.removeClass("textEditing"),c.unbind(),e=a.parents(".page:first"),u[l.field||"text"]=c.val())if(a.removeClass("output-item"),a.removeClass(function(e,t){return(t.match(/\S+-source/)||[]).join(" ")}),o.do(a.empty(),u),l.after){if(""===u[l.field||"text"])return;i.put(e,{type:"add",id:u.id,item:u,after:l.after})}else{if(u[l.field||"text"]===n)return;i.put(e,{type:"edit",id:u.id,item:u})}else l.after||i.put(e,{type:"remove",id:u.id}),e=$(".item").index(a),a.remove(),o.renderFrom(e);return null},!a.hasClass("textEditing")))return a.addClass("textEditing"),a.unbind(),n=null!=(r=u[l.field||"text"])?r:"",c=$("<textarea>".concat(h(n)).concat(h(null!=(r=l.suffix)?r:""),"</textarea>")).focusout(e).bind("keydown",t),a.html(c),l.caret?m(c,l.caret):l.append?(m(c,c.val().length),c.scrollTop(c[0].scrollHeight-c.height())):c.focus()},g=function(e,t,n,r){n={type:n,id:a.itemId(),text:r},r=$('<div class="item '.concat(n.type,'" data-id=').concat(n.id,"></div>"));return r.data("item",n).data("pageElement",e),t.after(r),t=f.getItem(t),p(r,n,{after:null!=t?t.id:void 0})},v=function(e){var t=e.get(0);return document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),{start:e=e.text.length,end:e}):{start:t.selectionStart,end:t.selectionEnd}},m=function(e,t){var n=e.get(0);if(null!=n)return n.createTextRange?((e=n.createTextRange()).move("character",t),e.select()):n.setSelectionRange(t,t),n.focus()};t.exports={textEditor:p}},{"./itemz":13,"./link":17,"./pageHandler":21,"./plugin":23,"./random":25}],9:[function(e,t,n){"use strict";function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=e("./neighborhood"),l=e("./plugin"),o=e("./resolve"),f=e("./pageHandler"),d=e("./editor"),h=e("./synopsis"),p=e("./drop"),g=e("./active"),i=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")},a=function(a,u){var n,e;return a.append("<p>Double-Click to Edit<br>Drop Text or Image to Insert</p>"),n=function(){for(var e,t,n=a.find("p").append('<br>Or Choose a Plugin\n<center>\n<table style="text-align:left;">\n<tr><td><ul id=format><td><ul id=data><td><ul id=other>'),r=window.catalog,o=0,i=r.length;o<i;o++)(t=r[o])&&t.category&&("format"!==(e=t.category)&&"data"!==e&&(e="other"),n.find("#"+e).append('<li><a class="menu" href="#" title="'.concat(t.title,'">').concat(t.name,"</a></li>")));return n.find("a.menu").click(function(e){var t=e.target.text,n=t.toLowerCase();if(a.removeClass("factory").addClass(u.type=n),a.unbind(),e.preventDefault(),g.set(a.parents(".page")),!window.catalog.find(function(e){return t===e.name}).editor)return d.textEditor(a,u);try{return window.plugins[n].editor(a,u)}catch(e){return n=e,console.log("".concat(t," Plugin editor failed: ").concat(n,". Falling back to textEditor")),d.textEditor(a,u)}})},e=function(){return a.append("<p>".concat(o.resolveLinks(u.prompt,i),"</b>"))},u.prompt?e():null!=window.catalog?n():wiki.origin.get("system/factories.json",function(e,t){return console.log("factory",t),window.catalog=t,n()})},e=function(t,o){var i=function(){var e;t.empty().unbind(),t.removeClass("factory").addClass(o.type),e=t.parents(".page:first");try{t.data("pageElement",e),t.data("item",o),l.getPlugin(o.type,function(e){return e.emit(t,o),e.bind(t,o)})}catch(e){t.append("<p class='error'>".concat(e,"</p>"))}return f.put(e,{type:"edit",id:o.id,item:o})},a=function(e){return o.prompt="Unexpected Item\nWe can't make sense of the drop.\nTry something else or see [[About Factory Plugin]].",e.userAgent=navigator.userAgent,o.punt=e,i()},e=function(n){return wiki.site(n.site).get("".concat(n.slug,".json"),function(e,t){if(!e&&(o.type="reference",o.site=n.site,o.slug=n.slug,o.title=t.title||n.slug,o.text=h(t),i(),null!=o.site))return s.registerNeighbor(o.site)})},n=function(e){return o.type="video",o.text="".concat(e.text,"\n(double-click to edit caption)\n"),i()},r=function(t){return document.documentElement.style.cursor="wait",y(t).then(function(e){return b(e)}).then(function(e){return document.documentElement.style.cursor="default",o.type="image",o.url=e,o.source=t,o.caption||(o.caption="Remote image"),i()})},u=function(n){if(null!=n){var e=c(n.type.split("/"),2),t=e[0],r=e[1],e=new FileReader;return"image"===t?(e.onload=function(e){return b(e.target.result).then(function(e){return o.type="image",o.url=e,o.caption||(o.caption="Uploaded image"),i()})},e.readAsDataURL(n)):"text"===t?(e.onload=function(e){var t=e.target.result;return"csv"===r?(o.type="data",o.columns=(e=v(t))[0],o.data=m(e),o.text=n.fileName):(o.type="paragraph",o.text=t),i()},e.readAsText(n)):a({name:n.name,type:n.type,size:n.size,fileName:n.fileName,lastModified:n.lastModified})}};return t.dblclick(function(e){return e.shiftKey?d.textEditor(t,o,{field:"prompt"}):(t.removeClass("factory").addClass(o.type="paragraph"),t.unbind(),d.textEditor(t,o))}),t.bind("dragenter",function(e){return e.preventDefault()}),t.bind("dragover",function(e){return e.preventDefault()}),t.bind("drop",p.dispatch({page:e,file:u,video:n,image:r,punt:a}))},v=function(e,t){var n,r,o,i;for(t=t||",",o=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),n=[[]],r=null;r=o.exec(e);)(i=r[1]).length&&i!==t&&n.push([]),i=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],n[n.length-1].push(i);return n},m=function(e){for(var t,u=e.shift(),n=function(e){for(var t={},n=_.zip(u,e),r=0,o=n.length;r<o;r++){var i=c(n[r],2),a=i[0];null!=(i=i[1])&&i.match(/\S/)&&"NULL"!==i&&(t[a]=i)}return t},r=[],o=0,i=e.length;o<i;o++)t=e[o],r.push(n(t));return r},y=function(e){var n=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach(function(e){return t+=String.fromCharCode(e)}),window.btoa(t)};return fetch(e).then(function(e){if(e.ok)return e;throw new Error("Unable to fetch image")}).then(function(e){return e.arrayBuffer().then(function(e){var t="data:image/jpeg;base64,";return t+=n(e)})}).catch(function(e){return console.log("Unable to fetch remote image")})},b=function(r){var o=new Image,i=void 0,a=void 0,u=function(e){return e.width<=500||e.height<=300};return new Promise(function(e){return o.src=r,o.onload=function(){return e()}}).then(function(){return i=o.naturalWidth,a=o.naturalHeight}).then(function(){var e,t;if(!u(o))return e=Math.max(1,Math.min(i/500,a/300)),t=Math.floor(Math.log2(e)),t=e/Math.pow(2,t),i=Math.round(i/t),a=Math.round(a/t)}).then(function(){return new Promise(function(t){var n=new Image;return n.src=o.src,n.onload=function(){var e;return u(n)?t(r):((e=document.createElement("canvas")).width=i,e.height=a,e.getContext("2d").drawImage(n,0,0,i,a),r=e.toDataURL("image/jpeg",.5),i/=2,a/=2,n.src=r)}})}).then(function(){return r})};t.exports={emit:a,bind:e}},{"./active":3,"./drop":7,"./editor":8,"./neighborhood":18,"./pageHandler":21,"./plugin":23,"./resolve":28,"./synopsis":35}],10:[function(e,t,n){"use strict";var c=e("./resolve"),s=e("./neighborhood"),i=e("./lineup"),a=e("./refresh"),r=function(e,t){var n,r,o,i,a,u;if(e.append("".concat(t.text,'<br><br><button class="create">create</button> new blank page')),(u=null!=(o=t.create)&&null!=(u=o.source)?u.transport:void 0)&&(e.append('<br><button class="transport" data-slug='.concat(t.slug,">create</button> transport from ").concat(u)),e.append("<p class=caption> unavailable</p>"),$.get("//localhost:4020",function(){return e.find(".caption").text("ready")})),null!=(u=s.sites[location.host])&&null!=u.sitemap){for(a=[],n=0,r=(i=u.sitemap).length;n<r;n++)(t=i[n]).slug.match(/-template$/)?a.push(e.append('<br><button class="create" data-slug='.concat(t.slug,">create</button> from ").concat(c.resolveLinks("[[".concat(t.title,"]]"))))):a.push(void 0);return a}},e=function(o,n){return o.find("button.transport").click(function(e){var t;return o.find(".caption").text("waiting"),t={title:o.parents(".page").data("data").title,create:n.create},t={type:"POST",url:n.create.source.transport,dataType:"json",contentType:"application/json",data:JSON.stringify(t)},$.ajax(t).done(function(e){var t,n,r;return o.find(".caption").text("ready"),r=wiki.newPage(e),t=o.parents(".page"),(n=i.atKey(t.data("key"))).become(r,r),e=n.getRawPage(),a.rebuildPage(n,t.empty())})})};t.exports={emit:r,bind:e}},{"./lineup":16,"./neighborhood":18,"./refresh":27,"./resolve":28}],11:[function(e,t,n){"use strict";var r=e("./dialog"),o=e("./editor"),i=e("./resolve"),a=!1,u=!1,c=function(){return u=!0,$.ajax("".concat("http://127.0.0.1:8080","/ipfs/Qmb1oS3TaS8vekxXqogoYsixe47sXcVxQ22kPWH8VSd7yQ"),{timeout:3e4,success:function(e){return a="wiki\n"===e},complete:function(e,t){return console.log("ipfs gateway ".concat(t))}})},s=function(e,t){return t.text||(t.text=t.caption),e.append('<img class=thumbnail src="'.concat(t.url,'"> <p>').concat(i.resolveLinks(t.text),"</p>"))},e=function(e,t){return e.dblclick(function(){return o.textEditor(e,t)}),t.ipfs&&!u&&c(),e.find("img").dblclick(function(e){return e.stopPropagation(),e=a&&null!=t.ipfs?"".concat(gateway,"/ipfs/").concat(t.ipfs):null!=t.source?t.source:t.url,r.open(t.text,'<img style="width:100%" src="'.concat(e,'">'))})};t.exports={emit:s,bind:e}},{"./dialog":6,"./editor":8,"./resolve":28}],12:[function(e,t,n){"use strict";var a=e("./util"),o=e("./link"),i=e("./page").newPage,u=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},r=function(e,t){var n=function(e){var t,n,r,o,i=[];for(o in e)r=e[o],n="<a href=".concat(o,">").concat(u(r.title)||o,"</a>"),r.journal&&((t=r.journal[r.journal.length-1].date)?n+=" &nbsp; from ".concat(a.formatElapsedTime(t)):n+=" &nbsp; from revision ".concat(r.journal.length-1)),i.push(n);return i.join("<br>")};return e.append('<p style="background-color:#eee;padding:15px;">\n  '.concat(n(t.pages),"\n</p>"))},e=function(e,r){return e.find("a").click(function(e){var t,n=$(e.target).attr("href");return e.shiftKey||(t=$(e.target).parents(".page")),n=i(r.pages[n]),o.showResult(n,{$page:t,rev:n.getRevision()}),!1})};t.exports={emit:r,bind:e}},{"./link":17,"./page":20,"./util":37}],13:[function(e,t,n){"use strict";var i=e("./pageHandler"),a=e("./plugin"),u=e("./random"),c=function(e,t){return setTimeout(t,e)},s=function(e){if(0<$(e).length)return $(e).data("item")||$(e).data("staticItem")},r=function(e,t){return i.put(e.parents(".page:first"),{type:"remove",id:t.id}),e.remove()},o=function(e,t,n){var r,o;return null==e&&(e=t.parents(".page")),n.id=u.itemId(),(r=$('<div class="item '.concat(n.type,'" data-id=""</div>'))).data("item",n).data("pageElement",e),null!=t?t.after(r):e.find(".story").append(r),a.do(r,n),o=s(t),c(500,function(){return i.put(e,{item:n,id:n.id,type:"add",after:null!=o?o.id:void 0})}),r},e=function(t,e,n){var r=$.extend({},n);t.empty().unbind(),t.removeClass(e).addClass(r.type),e=t.parents(".page:first");try{t.data("pageElement",e),t.data("item",r),a.getPlugin(n.type,function(e){return e.emit(t,r),e.bind(t,r)})}catch(e){t.append("<p class='error'>".concat(e,"</p>"))}return i.put(e,{type:"edit",id:r.id,item:r})};t.exports={createItem:o,removeItem:r,getItem:s,replaceItem:e}},{"./pageHandler":21,"./plugin":23,"./random":25}],14:[function(e,t,n){"use strict";var u=e("./pageHandler"),c=e("./state"),s=e("./active"),f=e("./refresh"),d=e("./lineup"),h=e("./drop"),p=e("./dialog"),g=e("./link"),v=e("./target"),m=e("./license"),y=e("./plugin"),b=e("./page").asSlug,w=e("./page").newPage,r=function(e){return e.filter(function(e){return e.editor}).forEach(function(t){return console.log("".concat(t.name," Plugin declares an editor, so pre-loading the plugin")),wiki.getPlugin(t.name.toLowerCase(),function(e){if(!e.editor||"function"!=typeof e.editor)return console.log("".concat(t.name,' Plugin ERROR.\nCannot find `editor` function in plugin. Set `"editor": false` in factory.json or\nCorrect the plugin to include all three of `{emit, bind, editor}`'))})})};wiki.origin.get("system/factories.json",function(e,t){return window.catalog=t,r(t)}),$(function(){var r,o,i,l,e,a,t;return p.emit(),$(document).keydown(function(e){var t,n,r=function(){switch(e.which){case 37:return-1;case 39:return 1}}();if(r&&!$(e.target).is(":input")&&0<=(t=(n=$(".page")).index($(".active"))+r)&&t<n.length&&s.set(n.eq(t)),(e.ctrlKey||e.metaKey)&&83===e.which)return e.preventDefault(),$("input.search").focus()}),$(window).on("popstate",c.show),$(document).ajaxError(function(e,t,n){if(0!==t.status&&404!==t.status)return console.log("ajax error",e,t,n)}),r=function(e){return"".concat(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},t=function(n){var e;if("application/json"===(null!=n?n.type:void 0))return(e=new FileReader).onload=function(e){var t=e.target.result,e=JSON.parse(t),t=w();return t.setTitle("Import from ".concat(n.name)),t.addParagraph("Import of ".concat(Object.keys(e).length," pages\n(").concat(r(n.size)," bytes)\nfrom an export file dated ").concat(n.lastModifiedDate,".")),t.addItem({type:"importer",pages:e}),g.showResult(t)},e.readAsText(n)},o=function(t,n){return console.log("fork to delete"),u.delete(t,n,function(e){if(null==e)return console.log("server delete successful"),t.isRecycler()||(e=f.newFuturePage(t.getTitle(),t.getCreate()),t.become(e),n.attr("id",e.getSlug()),f.rebuildPage(t,n)),n.addClass("ghost")})},e=function(e,n){return e?(console.log("getTemplate",e),u.get({whenGotten:function(e,t){return n(e)},whenNotGotten:function(){return n(null)},pageInformation:{slug:e}})):n(null)},i=function(e,t){var n;return e.preventDefault(),e.shiftKey||(n=$(e.target).parents(".page")),g.doInternalLink(t,n,$(e.target).data("site")),!1},a=null,$(".main").sortable({handle:".page-handle",cursor:"grabbing"}).on("sortstart",function(e,t){if(t.item.hasClass("page"))return s.set(t.item,!0),a=$(".page").index(t.item[0])}).on("sort",function(e,t){if(t.item.hasClass("page"))return t=t.item,e.pageY<0&&2<$(".page").length?t.addClass("pending-remove"):t.removeClass("pending-remove")}).on("sortstop",function(e,t){var n,r,o;if(t.item.hasClass("page")){if(n=t.item,o=(r=$(".page")).index($(".active")),t=$(".item").index(n.find(".item")[0]),n.hasClass("pending-remove")){if(1===r.length)return;d.removeKey(n.data("key")),n.remove(),s.set($(".page")[o])}else d.changePageIndex(n.data("key"),o),s.set($(".active")),a<o&&(o=a,t=$(".item").index($($(".page")[o]).find(".item")[0]));return y.renderFrom(t),c.setUrl(),c.debugStates()}}).delegate(".show-page-license","click",function(e){var t;return e.preventDefault(),e=(t=$(this).parents(".page")).find("h1").text().trim(),p.open("License for ".concat(e),m.info(t))}).delegate(".show-page-source","click",function(e){return e.preventDefault(),e=$(this).parents(".page"),e=d.atKey(e.data("key")).getRawPage(),p.open("JSON for ".concat(e.title),$("<pre/>").text(JSON.stringify(e,null,2)))}).delegate(".page","click",function(e){if(!$(e.target).is("a"))return s.set(this)}).delegate(".internal","click",function(e){var t=$(e.target),t=t.text()||t.data("pageName");return t="".concat(t),u.context=$(e.target).attr("title").split(" => "),i(e,t)}).delegate("img.remote","click",function(e){var t;return $(e.target).attr("src").startsWith("data:image/png")?(e.preventDefault(),t=$(e.target).data("site"),wiki.site(t).refresh(function(){})):(t=$(e.target).data("slug"),u.context=[$(e.target).data("site")],i(e,t))}).delegate(".revision","dblclick",function(e){var t,n;return e.preventDefault(),t=$(this).parents(".page"),e=(n=d.atKey(t.data("key")).getRawPage()).journal.length-1,t=n.journal[e],n=JSON.stringify(t,null,2),p.open("Revision ".concat(e,", ").concat(t.type," action"),$("<pre/>").text(n))}).delegate(".action","click",function(e){var t,n,r,o;return e.preventDefault(),(r=$(e.target)).is(".fork")&&null!=(o=r.data("slug"))?(u.context=[r.data("site")],i(e,o.split("_")[0])):(n=(t=$(this).parents(".page")).data("key"),o=d.atKey(n).getSlug(),(r=$(this).parent().children().not(".separator").index(r))<0?void 0:(e.shiftKey||t.nextAll().remove(),e.shiftKey||d.removeAllAfterKey(n),g.createPage("".concat(o,"_rev").concat(r),t.data("site")).appendTo($(".main")).each(function(e,t){return f.cycle($(t))}),s.set($(".page").last())))}).delegate(".fork-page","click",function(e){var t,n=$(e.target).parents(".page");if(!n.find(".future").length){if(t=d.atKey(n.data("key")),n.attr("id").match(/_rev0$/))return o(t,n);if(e={type:"fork"},n.hasClass("local")){if(u.useLocalStorage())return;n.removeClass("local")}else t.isRecycler()?n.removeClass("recycler"):t.isRemote()&&(e.site=t.getRemoteSite());return null!=n.data("rev")&&n.find(".revision").remove(),n.removeClass("ghost"),u.put(n,e)}}).delegate("button.create","click",function(r){return e($(r.target).data("slug"),function(e){var t,n=$(r.target).parents(".page:first");return n.removeClass("ghost"),(t=d.atKey(n.data("key"))).become(e),e=t.getRawPage(),f.rebuildPage(t,n.empty()),u.put(n,{type:"create",id:e.id,item:{title:e.title,story:e.story}})})}).delegate(".score","mouseenter mouseleave",function(e){return console.log("in .score..."),$(".main").trigger("thumb",$(e.target).data("thumb"))}).delegate("a.search","click",function(e){var o,t=$(e.target).parents(".page"),n=t.data("key"),i=d.atKey(n),r=w();return r.setTitle("Search from '".concat(i.getTitle(),"'")),r.addParagraph("Search for pages related to '".concat(i.getTitle(),"'.\nEach search on this page will find pages related in a different way.\nChoose the search of interest. Be patient.")),r.addParagraph("Find pages with links to this title."),r.addItem({type:"search",text:"SEARCH LINKS ".concat(i.getSlug())}),r.addParagraph("Find pages with titles similar to this title."),r.addItem({type:"search",text:"SEARCH SLUGS ".concat(i.getSlug())}),r.addParagraph("Find pages neighboring  this site."),r.addItem({type:"search",text:"SEARCH SITES ".concat(i.getRemoteSite(location.host))}),r.addParagraph("Find pages sharing any of these items."),r.addItem({type:"search",text:"SEARCH ANY ITEMS ".concat(function(){for(var e=i.getRawPage().story,t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push(o.id);return t}().join(" "))}),e.shiftKey||t.nextAll().remove(),e.shiftKey||d.removeAllAfterKey(n),g.showResult(r)}).bind("dragenter",function(e){return e.preventDefault()}).bind("dragover",function(e){return e.preventDefault()}).bind("drop",h.dispatch({page:function(e){return g.doInternalLink(e.slug,null,e.site)},file:t})),$(".provider input").click(function(){return $("footer input:first").val($(this).attr("data-provider")),$("footer form").submit()}),$("body").on("new-neighbor-done",function(e,t){return $(".page").each(function(e,t){return f.emitTwins($(t))})}),l=function(o){return new Promise(function(n,e){var r=b(o);return wiki.origin.get("".concat(r,".json"),function(e,t){return n({title:o,slug:r,type:"reference",text:(e?e.msg:null!=t?t.story[0].text:void 0)||""})})})},$("<span>&nbsp; ☰ </span>").css({cursor:"pointer"}).appendTo("footer").click(function(){var e,t,n,r,o,i,a,u,c,s=w();if(s.setTitle("Selected Plugin Pages"),s.addParagraph("Installed plugins offer these utility pages:"),window.catalog){for(c=[],e=0,r=(i=window.catalog).length;e<r;e++)if((t=i[e]).pages)for(n=0,o=(a=t.pages).length;n<o;n++)u=a[n],c.push(u);return Promise.all(c.map(l)).then(function(e){return e.forEach(function(e){return s.addItem(e)}),g.showResult(s)})}}),$("<span>&nbsp; wiki <span class=editEnable>✔︎</span> &nbsp; </span>").css({cursor:"pointer"}).appendTo("footer").click(function(){return $(".editEnable").toggle(),$(".page").each(function(){var e=$(this),t=d.atKey(e.data("key"));return f.rebuildPage(t,e.empty())})}),isAuthenticated||$(".editEnable").toggle(),v.bind(),$(function(){var e,n;return c.first(),e=$(".page").toArray(),(n=function(e){var t;if(0!==e.length)return t=$(e.shift()),f.cycle(t).then(function(){return n(e)});s.set($(".page").last())})(e)})})},{"./active":3,"./dialog":6,"./drop":7,"./license":15,"./lineup":16,"./link":17,"./page":20,"./pageHandler":21,"./plugin":23,"./refresh":27,"./state":34,"./target":36}],15:[function(e,t,n){"use strict";var r=e("./resolve"),o=e("./lineup"),i=function(){return'<p>\n  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">\n  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>\n</p><p>\n  This work is licensed under a\n  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">\n    Creative Commons Attribution-ShareAlike 4.0 International License\n  </a>.\n</p><p>\n  This license applies uniformly to all contributions\n  by all authors. Where authors quote other sources\n  they do so within the terms of fair use or other\n  compatiable terms.\n</p>'},a=function(e,t){var n,r,o,i,a,u,c;if(null==e.journal)return"";for(n={},i=[],o=(a=e.journal.slice(r=0).reverse()).length;r<o;r++)null!=(u=a[r]).site&&(t=u.site),"fork"!==u.type&&null==n[t]&&(c=wiki.site(t).getDirectURL(""),u=wiki.site(t).flag(),i.push('<a href="'.concat(c,'" target="_blank"><img class="remote" title="').concat(t,'" src="').concat(u,'"> ').concat(t,"</a>")),n[t]=!0);return 0<i.length?"<p>\n  Author's Sites:\n</p><p>\n  ".concat(i.join("<br>"),"\n</p>"):""},u=function(e){return null==(null!=e?e.provenance:void 0)?"":"<p>\n  Created From:\n</p><p>\n  ".concat(r.resolveLinks(e.provenance),"\n</p>")},e=function(e){var t=o.atKey(e.data("key")),e=t.getRawPage(),t=t.getRemoteSite(location.hostname);return i()+a(e,t)+u(e.journal[0])};t.exports={info:e}},{"./lineup":16,"./resolve":28}],16:[function(e,t,n){"use strict";var r=[].indexOf,o=e("./random"),a={},i=[],u=function(e){var t=o.randomBytes(4);return a[t]=e,i.push(t),t},c=function(e,t){var n=i.indexOf(e);return i.splice(n,1),i.splice(t,0,e)},s=function(t){return r.call(i,t)<0?null:(i=i.filter(function(e){return t!==e}),delete a[t],t)},l=function(e){var t,n=[];if(r.call(i,e)<0)return n;for(;i[i.length-1]!==e;)t=i.pop(),n.unshift(t),delete a[t];return n},f=function(e){return a[e]},d=function(e){return f(e).getTitle()},h=function(){return i.length?d(i[i.length-1]):"Wiki"},p=function(){return i},g=function(){return a={},i=[]},v=function(e){if("".concat(i)!=="".concat(e)&&(console.log("The lineup is out of sync with the dom."),console.log(".pages:",e),console.log("lineup:",i),"".concat(Object.keys(i).sort())==="".concat(Object.keys(e).sort())))return console.log("It looks like an ordering problem we can fix."),e},m=function(e){e=i.indexOf(e);return e<1?null:i[e-1]},e=function(e,t){var n,r,o=a[e],i=o.getRemoteSite(t),o=["view",r=o.getSlug()];return"welcome-visitors"!==r&&o.unshift("view","welcome-visitors"),i!==t&&null!=(n=m(e))&&((n=a[n]).isRemote()||o.push(t,n.getSlug())),o.unshift(i),o};t.exports={addPage:u,changePageIndex:c,removeKey:s,removeAllAfterKey:l,atKey:f,titleAtKey:d,bestTitle:h,debugKeys:p,debugReset:g,crumbs:e,debugSelfCheck:v}},{"./random":25}],17:[function(e,t,n){"use strict";var o=e("./lineup"),i=e("./active"),r=e("./refresh"),a=e("./page"),u=a.asTitle,c=a.asSlug,e=a.pageEmitter,s=function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return t&&"view"!==t&&(n=t),r=r||u(e),r=$('<div class="page" id="'.concat(e,'" tabindex="-1">\n  <div class="paper">\n    <div class="twins"> <p> </p> </div>\n    <div class="header">\n      <h1> <img class="favicon" src="').concat(wiki.site(n).flag(),'" height="32px"> ').concat(r," </h1>\n    </div>\n  </div>\n</div>")),n&&r.data("site",n),r},l=function(e,t){return s(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null).appendTo(".main").each(function(e,t){return r.cycle($(t))})},a=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=c(e);return null!=t&&$(t).nextAll().remove(),null!=t&&o.removeAllAfterKey($(t).data("key")),l(r,n,e),i.set($(".page").last())},f=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null!=n.$page&&$(n.$page).nextAll().remove(),null!=n.$page&&o.removeAllAfterKey($(n.$page).data("key")),t=e.getSlug(),null!=n.rev&&(t+="_rev".concat(n.rev)),(t=s(t).addClass("ghost")).appendTo($(".main")),r.buildPage(e,t),i.set($(".page").last())};e.on("show",function(e){return console.log("pageEmitter handling",e),f(e)}),t.exports={createPage:s,doInternalLink:a,showPage:l,showResult:f}},{"./active":3,"./lineup":16,"./page":20,"./refresh":27}],18:[function(e,t,n){"use strict";var i,h,a,r,p={}.hasOwnProperty,o=e("underscore"),g=e("minisearch");t.exports=h={},h.sites={},a=0,r=function(n,r){var e,t,o;if(!r.sitemapRequestInflight)return r.sitemapRequestInflight=!0,o=function(e,t,n){return $('.neighbor[data-site="'.concat(e,'"]')).find("div").removeClass(t).addClass(n)},e=function(){return o(n,"wait","fetch"),wiki.site(n).get("system/sitemap.json",function(e,t){return r.sitemapRequestInflight=!1,e?(o(n,"fetch","fail"),wiki.site(n).refresh(function(){})):(r.sitemap=t,o(n,"fetch","done"),$("body").trigger("new-neighbor-done",n))}),wiki.site(n).getIndex("system/site-index.json",function(e,t){if(e)return console.log("error loading index",n,e);try{return r.siteIndex=g.loadJSON(t,{fields:["title","content"]}),console.log(n,"index loaded")}catch(e){return console.log("error loading index - not a valid index",n)}})},t=Date.now(),a<t?(a=t+500,setTimeout(e,100)):(setTimeout(e,a-t),a+=500)},h.retryNeighbor=function(e){var t;return console.log("retrying neighbor"),h.sites[e]=t={},r(e,t)},h.registerNeighbor=function(e){var t;if(null==h.sites[e])return h.sites[e]=t={},r(e,t),$("body").trigger("new-neighbor",e)},h.updateSitemap=function(e){var t,n,r,o,i,a=location.host;if((n=h.sites[a])&&!n.sitemapRequestInflight)return r=e.getSlug(),t=e.getDate(),i=e.getTitle(),o=e.getSynopsis(),e=e.getLinks(),o={slug:r,date:t,title:i,synopsis:o,links:e},0<=(n=(e=n.sitemap).findIndex(function(e){return e.slug===r}))?e[n]=o:e.push(o),$("body").trigger("new-neighbor-done",a)},h.deleteFromSitemap=function(e){var t,n,r,o,i=location.host;if((n=h.sites[i])&&!n.sitemapRequestInflight&&(o=e.getSlug(),0<=(t=(r=n.sitemap).findIndex(function(e){return e.slug===o}))))return r.splice(t),$("body").trigger("delete-neighbor-done",i)},h.listNeighbors=function(){return o.keys(h.sites)},i=function(e,t){var n,r,o,i;switch(t.type){case"paragraph":case"markdown":e+=" "+t.text.replace(/\[{1,2}|\]{1,2}/g,"");break;case"html":e+=" "+t.text.replace(/<[^>]*>/g,"");break;default:if(null!=t.text)for(n=0,r=(i=t.text.split(/\r\n?|\n/)).length;n<r;n++)(o=i[n]).match(/^[A-Z]+[ ].*/)||(e+=" "+o.replace(/\[{1,2}|\]{1,2}/g,""))}return e},h.updateIndex=function(e,t){var n,r,o;if(console.log("updating ".concat(e.getSlug()," in index")),o=location.host,n=h.sites[o]){r=t.reduce(i,""),o=e.getSlug(),t=e.getTitle(),e=e.getRawPage().story.reduce(i,"");try{n.siteIndex.remove({id:o,title:t,content:r})}catch(e){(r=e).message.includes("not in the index")||console.log("removing ".concat(o," from index failed"),r)}return n.siteIndex.add({id:o,title:t,content:e})}},h.deleteFromIndex=function(t){var e,n,r=location.host;if(e=h.sites[r]){n=t.getSlug(),r=t.getTitle(),t=t.getRawPage().story.reduce(i,"");try{return e.siteIndex.remove({id:n,title:r,content:t})}catch(e){if(!(t=e).message.includes("not in the index"))return console.log("removing ".concat(n," from index failed"),t)}}},h.search=function(e){var t,o,n,r,i,a,u=[],c={},s=function(e){return null!=c[e]?c[e]++:c[e]=1},l=function(e,t){var n,r="indexing sitemap ( ".concat(e," )");return console.time(r),console.log("indexing sitemap:",e),n=new g({fields:["title","content"]}),o.sitemap.forEach(function(e){n.add({id:e.slug,title:e.title,content:e.synopsis})}),console.timeEnd(r),n},f=Date.now(),d=h.sites;for(n in d)p.call(d,n)&&(o=d[n]).sitemap&&null==o.siteIndex&&(o.siteIndex=l(n));for(n in r=location.host,i=h.sites)if(p.call(i,n)&&(o=i[n]).siteIndex){s("sites");try{null!=c.pages?c.pages+=o.sitemap.length:c.pages=o.sitemap.length}catch(e){console.info("+++ sitemap not valid for ",n),o.sitemap=[]}t=n===r?(a=20,2):(a=10,1),o.siteIndex.search(e,{boost:{title:a,content:t},prefix:!0,combineWith:"AND"}).forEach(function(t){return s("finds"),u.push({page:o.sitemap.find(function(e){return e.slug===t.id}),site:n,rank:t.score})})}return u.sort(function(e,t){return t.rank-e.rank}),c.msec=Date.now()-f,{finds:u,tally:c}},h.backLinks=function(n){var e,r,t,o=[],i=h.sites;for(r in i)p.call(i,r)&&(e=i[r]).sitemap&&e.sitemap.forEach(function(e,t){if(null!=e.links&&0<Object.keys(e.links).length&&Object.keys(e.links).includes(n))return o.push({slug:e.slug,title:e.title,site:r,itemId:e.links[n],date:e.date})});return t={},o.forEach(function(e){return n=e.slug,t[n]=t[n]||{},t[n].title=e.title,t[n].sites=t[n].sites||[],t[n].sites.push({site:e.site,date:e.date,itemId:e.itemId})}),t}},{minisearch:57,underscore:58}],19:[function(e,t,n){"use strict";var r=e("./link"),o=e("./wiki"),i=e("./neighborhood"),a=null,u=0,c=function(e){return e.hasOwnProperty("links")},s=function(e){return console.log("neighbor - flag"),'<span class="neighbor" data-site="'.concat(e,'">\n  <div class="wait">\n    <img src="').concat(o.site(e).flag(),'" title="').concat(e,'">\n  </div>\n</span>')},l=function(e){return a=e.sites},e=function(){var n=$(".neighborhood");return $("body").on("new-neighbor",function(e,t){return n.append(s(t))}).on("new-neighbor-done",function(e,t){var n,r;try{r=a[t].sitemap.length}catch(e){r=0}n=$('.neighborhood .neighbor[data-site="'.concat(t,'"]')).find("img");try{a[t].sitemap.some(c)?n.attr("title","".concat(t,"\n ").concat(r," pages with 2-way links")):n.attr("title","".concat(t,"\n ").concat(r," pages"))}catch(e){console.info("+++ sitemap not valid for ",t),a[t].sitemap=[]}return u+=r,$(".searchbox .pages").text("".concat(u," pages"))}).delegate(".neighbor img","click",function(e){var t;return $(e.target).parent().hasClass("fail")?($(e.target).parent().removeClass("fail").addClass("wait"),t=$(e.target).attr("title"),o.site(t).refresh(function(){return console.log("about to retry neighbor"),i.retryNeighbor(t)})):r.doInternalLink("welcome-visitors",null,this.title.split("\n")[0])})};t.exports={inject:l,bind:e}},{"./link":17,"./neighborhood":18,"./wiki":38}],20:[function(e,t,n){"use strict";var s=e("./util").formatDate,h=e("./random"),p=e("./revision"),g=e("./synopsis"),v=e("underscore"),e=new(e("events").EventEmitter),m=function(e){return e.replace(/\s/g,"-").replace(/[^A-Za-z0-9-]/g,"").toLowerCase()},y=function(e){return[{symbol:"❄",date:e-316224e5,period:"a Year"},{symbol:"⚘",date:e-80352e5,period:"a Season"},{symbol:"⚪",date:e-26784e5,period:"a Month"},{symbol:"☽",date:e-6048e5,period:"a Week"},{symbol:"☀",date:e-864e5,period:"a Day"},{symbol:"⌚",date:e-36e5,period:"an Hour"}]},b=function(e,l){var t,n,r,o,i,a,u,f,c,d=e||{};return d.title||(d.title="empty"),d.story||(d.story=[]),d.journal||(d.journal=[]),r=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return f()?l:e},o=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=[];return(e||f())&&t.push(r(e)),u()&&t.push("".concat(d.plugin," plugin")),t.join("\n")},n=function(e){var t,n,r,o,i,a,u,c,s=[];for(f()?s.push(l):null!=e&&s.push(e),r=0,i=(u=d.story).length;r<i;r++)null!=(null!=(n=u[r])?n.site:void 0)&&s.push(n.site);for(o=0,a=(c=d.journal).length;o<a;o++)null!=(null!=(t=c[o])?t.site:void 0)&&s.push(t.site);return v.uniq(s)},e=function(){var e=a(),e="welcome-visitors"===e?"view/welcome-visitors":"view/welcome-visitors/view/".concat(e);return f()?wiki.site(l).getDirectURL(e):"/".concat(e)},c=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if((n=e[r]).id===t.id&&n.date===t.date)return!1;return!0},{getRawPage:function(){return d},getContext:function(){var e,t,n,r,o,i=["view"];for(f()&&i.push(l),t=function(e){if(null!=e&&!v.include(i,e))return i.push(e)},r=(o=d.journal.slice(n=0).reverse()).length;n<r;n++)t(null!=(e=o[n])?e.site:void 0);return i},isPlugin:u=function(){return null!=d.plugin},isRemote:f=function(){return!(null==l||"view"===l||"origin"===l||"local"===l||"recycler"===l)},isLocal:function(){return"local"===l},isRecycler:function(){return"recycler"===l},getRemoteSite:r,getRemoteSiteDetails:o,getSlug:a=function(){return m(d.title)},getNeighbors:n,getTitle:function(){return d.title},getLinks:function(){var e,t=function(e,t,n,r){var o,i,a;try{for(i=/\[\[([^\]]+)\]\]/g,0;null!==(a=i.exec(t.text));)e.has(m(a[1]))||e.set(m(a[1]),t.id)}catch(e){o=e,console.log("*** Error extracting links from ".concat(n," of ").concat(JSON.stringify(r)),o.message)}return e};try{e=d.story.reduce(t,new Map)}catch(e){t=e,console.log("+++ Extract links on ".concat(d.slug," fails"),t)}return 0<e.size?Object.fromEntries(e):{}},setTitle:function(e){return d.title=e},getRevision:i=function(){return d.journal.length-1},getDate:function(){var e=d.journal[i()];if(null!=e&&null!=e.date)return e.date},getTimestamp:function(){var e=d.journal[i()];return null!=e?null!=e.date?s(e.date):"Revision ".concat(i()):"Unrecorded Date"},getSynopsis:function(){return g(d)},addItem:t=function(e){return e=v.extend({},{id:h.itemId()},e),d.story.push(e)},getItem:function(e){for(var t,n=d.story,r=0,o=n.length;r<o;r++)if((t=n[r]).id===e)return t;return null},addParagraph:function(e){return t({type:"paragraph",text:e})},seqItems:function(r){return new Promise(function(t,e){var n=function(e){return e>=d.story.length?t():r(d.story[e]||{text:"null"},function(){return n(e+1)})};return n(0)})},seqActions:function(u){var c=0,s=y((new Date).getTime()),l=function(e){var t,n,r,o,i,a;if(!(e>=d.journal.length)){for(n=(t=d.journal[e]||{}).date||0,a=null,r=0,o=s.length;r<o;r++)(i=s[r]).date>c&&i.date<n&&(a=i);return c=n,u({action:t,separator:a},function(){return l(e+1)})}};return l(0)},become:function(e,t){if(d.story=(null!=e?e.getRawPage().story:void 0)||[],null!=t)return d.journal=null!=t?t.getRawPage().journal:void 0},siteLineup:e,merge:function(e){for(var o,t=function(){for(var e=d.journal,t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push(o);return t}(),n=e.getRawPage().journal,r=0,i=n.length;r<i;r++)o=n[r],c(d.journal,o)&&t.push(o);return t.push({type:"fork",site:e.getRemoteSite(),date:(new Date).getTime()}),b(p.create(999,{title:d.title,journal:t}),l)},apply:function(e){if(p.apply(d,e),e.site)return l=null},getCreate:function(){var e=function(e){return"create"===e.type};return d.journal.reverse().find(e)}}};t.exports={newPage:b,asSlug:m,asTitle:function(e){return e.replace(/-/g," ")},pageEmitter:e}},{"./random":25,"./revision":29,"./synopsis":35,"./util":37,events:47,underscore:58}],21:[function(e,t,n){"use strict";var c,i,o,s,a,l,u=e("underscore"),f=e("./state"),d=e("./revision"),h=e("./addToJournal"),p=e("./page").newPage,g=(e("./random"),e("./lineup")),v=e("./neighborhood");t.exports=o={},c=function(e){return JSON.parse(JSON.stringify(e))},o.useLocalStorage=function(){return 0<$(".login").length},i=function(e){if(e=localStorage.getItem(e))return JSON.parse(e)},l=function(e){var r=e.pageInformation,o=e.whenGotten,i=e.whenNotGotten,a=e.localContext,e=r.slug,u=r.rev,c=r.site,t={get:function(n,r){return wiki.local.get(n,function(e,t){return console.log([e,t]),null!=e?wiki.origin.get(n,r):(c="local",r(null,t))})}};return c?a=[]:c=a.shift(),null===(c=c===window.location.host?"origin":c)&&(c="view"),function(){switch(c){case"local":return wiki.local;case"origin":return wiki.origin;case"recycler":return wiki.recycler;case"view":return t;default:return wiki.site(c)}}().get("".concat(e,".json"),function(e,t){var n;return e?404===e.xhr.status||0===e.xhr.status?0<a.length?l({pageInformation:r,whenGotten:o,whenNotGotten:i,localContext:a}):i():(n="The page handler has run into problems with this request.\n<pre class=error>".concat(JSON.stringify(r),"</pre>\nThe requested url.\n<pre class=error>").concat(url,"</pre>\nThe server reported status.\n<pre class=error>").concat(null!=(n=e.xhr)?n.status:void 0,"</pre>\nThe error message.\n<pre class=error>").concat(e.msg,"</pre>\nThese problems are rarely solved by reporting issues.\nThere could be additional information reported in the browser's console.log.\nMore information might be accessible by fetching the page outside of wiki.\n<a href=\"").concat(url,'" target="_blank">try-now</a>'),(e=p({title:"Trouble: Can't Get Page"},null)).addItem({type:"html",text:n}),o(e)):(console.log("got",c,t),u&&(t=d.create(u,t)),o(p(t,c)))})},o.get=function(e){var t,n=e.whenGotten,r=e.whenNotGotten,e=e.pageInformation;return!e.site&&(t=i(e.slug))?(e.rev&&(t=d.create(e.rev,t)),n(p(t,"local"))):(o.context.length||(o.context=["view"]),l({pageInformation:e,whenGotten:n,whenNotGotten:r,localContext:u.clone(o.context)}))},o.context=[],s=function(e,t,n){var r,o;return"create"===n.type?r={title:n.item.title,story:[],journal:[]}:(null==(r=(r=i(t.slug))||g.atKey(e.data("key")).getRawPage()).journal&&(r.journal=[]),null!=(o=n.fork)&&(r.journal=r.journal.concat({type:"fork",site:o,date:(new Date).getTime()}),delete n.fork)),d.apply(r,n),wiki.local.put(t.slug,r,function(){return h(e.find(".journal"),n),e.addClass("local")})},a=function(r,o,i){var a=c(i),u=g.atKey(r.data("key"));return"fork"===i.type&&(a.item=c(u.getRawPage())),wiki.origin.get("".concat(o.slug,".json"),function(e,t){var n=!e&&t.story||[];return wiki.origin.put(o.slug,a,function(e){return e?(i.error={type:e.type,msg:e.msg,response:e.xhr.responseText},s(r,o,i)):(null!=u&&u.apply&&u.apply(i),v.updateSitemap(u),v.updateIndex(u,n),h(r.find(".journal"),i),"fork"===i.type?wiki.local.delete(r.attr("id")):void 0)})})},o.put=function(t,e){var n=function(){var e;switch(e=t.data("site")){case"origin":case"local":case"view":case location.host:return null;default:return e}},r={slug:t.attr("id").split("_rev")[0],rev:t.attr("id").split("_rev")[1],site:n(),local:t.hasClass("local")},n=r.site;return console.log("pageHandler.put",e,r),o.useLocalStorage()&&(null!=r.site?console.log("remote => local"):r.local||(console.log("origin => local"),e.site=n=location.host)),e.date=(new Date).getTime(),"origin"===e.site&&delete e.site,t.removeClass("plugin"),n&&(t.find("h1").prop("title",location.host),t.find("h1 img").attr("src","/favicon.png"),t.find("h1 a").attr("href","/view/welcome-visitors/view/".concat(r.slug)).attr("target",location.host),t.data("site",null),t.removeClass("remote"),f.setUrl(),"fork"!==e.type&&(e.fork=n,h(t.find(".journal"),{type:"fork",site:n,date:e.date}))),(o.useLocalStorage()||"local"===r.site?s:a)(t,r,e)},o.delete=function(t,e,n){return console.log("delete server-side"),console.log("pageObject:",t),t.isRecycler()?wiki.recycler.delete("".concat(t.getSlug(),".json"),function(e){return setTimeout(function(){return n(e)},300)}):wiki.origin.delete("".concat(t.getSlug(),".json"),function(e){return setTimeout(function(){return null==e&&v.deleteFromSitemap(t),null==e&&v.deleteFromIndex(t),n(e)},300)})}},{"./addToJournal":4,"./lineup":16,"./neighborhood":18,"./page":20,"./random":25,"./revision":29,"./state":34,underscore:58}],22:[function(e,t,n){"use strict";var r=e("./editor"),u=e("./resolve"),o=e("./itemz"),i=function(e){return e.match(/<(i|b|p|a|h\d|hr|br|li|img|div|span|table|blockquote)\b.*?>/i)?"html":"markdown"},a=function(e,t){for(var n,r=t.text.split(/\n\n+/),o=[],i=0,a=r.length;i<a;i++)(n=r[i]).match(/\S/)?o.push(e.append("<p>".concat(u.resolveLinks(n),"</p>"))):o.push(void 0);return o},e=function(t,n){return t.dblclick(function(e){return e.shiftKey?(n.type=i(n.text),o.replaceItem(t,"paragraph",n)):r.textEditor(t,n,{append:!0})})};t.exports={emit:a,bind:e}},{"./editor":8,"./itemz":13,"./resolve":28}],23:[function(e,t,n){"use strict";var r,o,u,i,a,c,s,l,f=[].indexOf;t.exports=s={},u=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},a=function(e,t){return console.log("loading url:",e),t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),$.ajax(t)},l=[],c={},i=s.getScript=function(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return 0<=f.call(l,r)?o():a(r).done(function(){return l.push(r),o()}).fail(function(e,t,n){return console.log("getScript: Failed to load:",r,n),o()})},s.renderFrom=function(e){var o,i,t=$(".item").slice(e);return console.log("notifIndex",e,"about to render",t.toArray()),i=Promise.resolve(),i=(i=(o=function(e){var n,r,t;return 0===e.length?i:(t=e.shift(),(n=$(t)).hasClass("textEditing")||(r=n.data("item"),i=i.then(function(){return new Promise(function(e,t){return n.off(),s.emit(n.empty(),r,function(){return e()})})})),o(e))})(t.toArray())).then(function(){var o;return i=Promise.resolve(),(o=function(e){var n,r,t;return 0===e.length?i:(t=e.shift(),n=$(t),r=n.data("item"),i=i.then(function(){return new Promise(function(t,e){return s.getPlugin(r.type,function(e){return e.bind(n,r),t()})})}),o(e))})(t.toArray())})},o=function(n){return function(e,t){return e.addClass("emit"),n(e,t)}},r=function(u,c){return function(o,t,e){var n,i,r,a;return o[0].consuming=[],r=$(".item").index(o),n=window.plugins[u].consumes,a=Promise.resolve(),n&&(i=[],n.forEach(function(e){var t=$(".item:lt(".concat(r,")")).filter(e);return console.log(u,"consumes",e),console.log(t,"produce",e),t&&0!==t.length||console.log("warn: no items in lineup that produces",e),console.log("there are ".concat(t.length," instances of ").concat(e)),t.each(function(e,t){var n=$(t).parents(".page").data("key"),r=$(t).attr("data-id");return o[0].consuming.push("".concat(n,"/").concat(r)),i.push(t.promise)})}),a=Promise.all(i)),a.then(function(){var e;return o.removeClass("emit"),(e=c(o,t))&&"function"!=typeof e.then||(e=Promise.resolve(e)),o[0].promise=e}).catch(function(e){return console.log("plugin emit: unexpected error",e)})}},s.wrap=function(e,t){return t.emit=o(t.emit),t.bind=r(e,t.bind),t},s.get=s.getPlugin=function(n,t){return c[n]?c[n].then(t):(c[n]=new Promise(function(t,e){return window.plugins[n]?t(window.plugins[n]):i("/plugins/".concat(n,"/").concat(n,".js"),function(){var e=window.plugins[n];return e?(s.wrap(n,e),t(e)):i("/plugins/".concat(n,".js"),function(){return(e=window.plugins[n])&&s.wrap(n,e),t(e)})})}),c[n].then(function(e){return delete c[n],t(e)}),c[n])},s.do=s.doPlugin=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};return e.data("item",t),s.renderFrom($(".item").index(e)).then(function(){return n()})},s.emit=function(r,o){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},a=function(e,t){return r.append('<div class="error">\n  '.concat(u(o.text||""),"\n  <button>help</button><br>\n</div>")),null!=o.text&&r.find(".error").dblclick(function(e){return wiki.textEditor(r,o)}),r.find("button").on("click",function(){return wiki.dialog(e.toString(),'<p> This "'.concat(o.type,'" plugin won\'t show.</p>\n<li> Is it available on this server?\n<li> Is its markup correct?\n<li> Can it find necessary data?\n<li> Has network access been interrupted?\n<li> Has its code been tested?\n<p> Developers may open debugging tools and retry the plugin.</p>\n<button class="retry">retry</button>\n<p> Learn more\n  <a class="external" target="_blank" rel="nofollow"\n  href="http://plugins.fed.wiki.org/about-plugins.html"\n  title="http://plugins.fed.wiki.org/about-plugins.html">\n    About Plugins\n    <img src="/images/external-link-ltr-icon.png">\n  </a>\n</p>')),$(".retry").on("click",function(){return 2<t.emit.length?t.emit(r,o,function(){return i()}):(t.emit(r,o),i())})})};return r.data("pageElement",r.parents(".page")),r.data("item",o),s.get(o.type,function(t){var n;try{if(null==t)throw TypeError("Can't find plugin for '".concat(o.type,"'"));return 2<t.emit.length?t.emit(r,o,function(){return t.bind(r,o),i()}):(t.emit(r,o),i())}catch(e){return n=e,console.log("plugin error",n),a(n,t),i()}})},s.registerPlugin=function(e,t){return window.plugins[e]=t($)}},{}],24:[function(e,t,n){"use strict";var r=e("./plugin");window.plugins={reference:r.wrap("reference",e("./reference")),factory:r.wrap("factory",e("./factory")),paragraph:r.wrap("paragraph",e("./paragraph")),image:r.wrap("image",e("./image")),future:r.wrap("future",e("./future")),importer:r.wrap("importer",e("./importer"))}},{"./factory":9,"./future":10,"./image":11,"./importer":12,"./paragraph":22,"./plugin":23,"./reference":26}],25:[function(e,t,n){"use strict";var o=function(){return(256*(1+Math.random())|0).toString(16).substring(1)},r=function(r){return function(){for(var e=[],t=1,n=r;1<=n?t<=n:n<=t;1<=n?t++:t--)e.push(o());return e}().join("")};t.exports={randomByte:o,randomBytes:r,itemId:function(){return r(8)}}},{}],26:[function(e,t,n){"use strict";var r=e("./editor"),o=e("./resolve"),i=e("./page"),a=function(e,t){var n,r=t.slug;return r=(r=null!=t.title?r||i.asSlug(t.title):r)||"welcome-visitors",n=t.site,o.resolveFrom(n,function(){return e.append("<p>\n  <img class='remote'\n    src='".concat(wiki.site(n).flag(),"'\n    title='").concat(n,"'\n    data-site=\"").concat(n,'"\n    data-slug="').concat(r,'"\n  >\n  ').concat(o.resolveLinks("[[".concat(t.title||r,"]]")),"\n  —\n  ").concat(o.resolveLinks(t.text),"\n</p>"))})},e=function(e,t){return e.dblclick(function(){return r.textEditor(e,t)})};t.exports={emit:a,bind:e}},{"./editor":8,"./page":20,"./resolve":28}],27:[function(e,t,n){"use strict";function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=e("underscore"),h=e("./pageHandler"),p=e("./plugin"),o=e("./state"),y=e("./neighborhood"),g=e("./addToJournal"),i=e("./actionSymbols"),v=e("./lineup"),m=e("./resolve"),a=e("./random"),e=e("./page"),b=e.newPage,w=e.asSlug,u=e.pageEmitter,x=function(e){if(0<$(e).length)return $(e).data("item")||$(e).data("staticItem")},k=function(e,t,n){n=$.extend({},n),e=v.atKey(e.data("key"));return null!=e.getItem(n.id)?(n.alias||(n.alias=n.id),n.id=a.itemId(),t.attr("data-id",n.id),t.data("id",n.id),t.data("item").id=n.id):null!=n.alias&&null==e.getItem(n.alias)&&(n.id=n.alias,delete n.alias,t.attr("data-id",n.id)),n},_=function(e,t){return e&&t&&e.get(0)===t.get(0)},I=function(e){return e.children().map(function(e,t){return $(t).attr("data-id")}).get()},c=function(e,t,n,r){var o,i=t.item,a=x(i),u=i.data("pageElement"),c=u.hasClass("ghost")||u.hasClass("remote"),s=i.parents(".page:first"),l=s.hasClass("ghost"),f=_(u,s),t=!f&&u.attr("id")===s.attr("id");if(!l&&!t)return f?(f=I(i.parents(".story:first")),void(d.isEqual(f,r)||($(".shadow-copy").remove(),i.empty(),o=$(".item").index(i),p.renderFrom(o=n<o?n:o),h.put(s,{id:a.id,type:"move",order:f})))):(c||e.shiftKey?$(".shadow-copy").removeClass("shadow-copy").data(i.data()).attr({"data-id":i.attr("data-id")}):h.put(u,{id:a.id,type:"remove"}),i.data("pageElement",s),c=i.prev(".item"),u=x(c),a=k(s,i,a),h.put(s,{id:a.id,type:"add",item:a,after:null!=u?u.id:void 0}),$(".shadow-copy").remove(),i.empty(),c.after(i),o=$(".item").index(i),p.renderFrom(o=n<o?n:o));$(e.target).sortable("cancel")},s=function(e,t){var n=t.item.data("pageElement"),r=n.hasClass("ghost")||n.hasClass("remote"),o=t.placeholder.parents(".page:first"),i=o.hasClass("ghost"),t=_(n,o),o=!t&&n.attr("id")===o.attr("id"),t=r||e.shiftKey&&!t;return i||o?($("body").css("cursor","no-drop"),$(".shadow-copy").hide()):t?($("body").css("cursor","copy"),$(".shadow-copy").show()):($("body").css("cursor","move"),$(".shadow-copy").hide())},l=function(e){var n=$("body").css("cursor"),t={connectWith:".page .story",placeholder:"item-placeholder",forcePlaceholderSize:!0,delay:150},r=e.find(".story"),o=null,i=null,a=null,u=function(e){if(27===e.which)return a=!0,r.sortable("cancel")};return r.sortable(t).on("sortstart",function(e,t){var n=t.item;return o=I(r),i=$(".item").index(n),a=!1,$("body").on("keydown",u),n.clone().insertAfter(t.placeholder).hide().addClass("shadow-copy").css({width:"",height:"",position:"",zIndex:""}).removeAttr("data-id")}).on("sort",s).on("sortstop",function(e,t){return $("body").css("cursor",n).off("keydown",u),a||c(e,t,i,o),$(".shadow-copy").remove()})},S=function(e){e=$(e).parents(".page:first");return v.atKey(e.data("key"))},j=function(e,t){t=S(t.draggable),e=S(e.target);return u.emit("show",e.merge(t))},E=function(e){e=e.find(".journal");return e.draggable({revert:!0,appendTo:".main",scroll:!1,helper:"clone"}),e.droppable({hoverClass:"ui-state-hover",drop:j,accept:".journal"})},A=function(t){return t.find(".add-factory").on("click",function(e){if(!t.hasClass("ghost"))return e.preventDefault(),C(t)})},C=function(e){var t={type:"factory",id:a.itemId()},n=$("<div />",{class:"item factory"}).data("item",t).attr("data-id",t.id);return n.data("pageElement",e),e.find(".story").append(n),p.do(n,t),n=n.prev(".item"),n=x(n),h.put(e,{item:t,id:t.id,type:"add",after:null!=n?n.id:void 0})},O=function(e){var o;e.preventDefault(),v.debugSelfCheck(function(){for(var e=$(".page"),t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push($(o).data("key"));return t}());var t,n=$(e.target).parents(".page:first"),e=f(t=v.crumbs(n.data("key"),location.host),1)[0];return""===(n=f(wiki.site(e).getDirectURL("").split("/"),1)[0])&&(n=window.location.protocol),window.open("".concat(n,"//").concat(t.join("/")),e).focus()},T=function(e,t,n){var r=n.isRecycler()?"recycler":n.getRemoteSite(location.host),o=n.getRemoteSiteDetails(location.host);return e.append('<h1 title="'.concat(o,'">\n  <span>\n    <a href="').concat(n.siteLineup(),'" target="').concat(r,'">\n      <img src="').concat(wiki.site(r).flag(),'" height="32px" class="favicon"></a>\n    ').concat(m.escape(n.getTitle()),"\n  </span>\n</h1>")),e.find("a").on("click",O)},F=function(e,t,n){if(t.attr("id").match(/_rev/))return t.addClass("ghost"),t.data("rev",n.getRevision()),e.append($('<h2 class="revision">\n  <span>\n    '.concat(n.getTimestamp(),"\n  </span>\n</h2>")))},L=function(e){return e.append('<div class="control-buttons">\n  <a href="#" class="button fork-page" title="fork this page">'.concat(i.fork,'</a>\n  <a href="#" class="button add-factory" title="add paragraph">').concat(i.add,"</a>\n</div>"))},R=function(e,t){var n,r,o,i,a,u,c,s,l,f,d,t=t.getSlug(),h=y.backLinks(t);if(0<Object.keys(h).length){for(c in s=[],h){for((n=h[c]).sites.sort(function(e,t){return(e.date||0)<(t.date||0)}),r=[],o=i=0,a=(l=n.sites).length;i<a;o=++i)d=l[o],o<10?(f=(null!=(f=n.sites[o-1])?f.date:void 0)===d.date?"":" ",r.unshift(f),r.unshift('<img class="remote"\n    src="'.concat(wiki.site(d.site).flag(),'"\n    data-slug="').concat(c,'"\n    data-site="').concat(d.site,'"\n    data-id="').concat(d.itemId,'"\n    title="').concat(d.site,"\n").concat(wiki.util.formatElapsedTime(d.date),'">'))):10===o&&r.unshift(" ⋯ ");u=m.resolveLinks("[[".concat(n.title,"]]")),s.push('<div style="clear: both;">\n  <div style="float: left;">'.concat(u,'</div>\n  <div style="text-align: right;"> ').concat(r.join("")," </div>\n</div>"))}if(s)return e.append("<details>\n  <summary>".concat(s.length," pages link here:</summary>\n  ").concat(s.join("\n"),"\n</details>"))}},D=function(e,t){var n=t.getRemoteSite(location.host),t=t.getSlug();return e.append('<a class="show-page-license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a> .\n<a class="show-page-source" href="'.concat(wiki.site(n).getDirectURL(t),'.json" title="source">JSON</a> .\n<a href= "').concat(wiki.site(n).getDirectURL(t),'.html" date-slug="').concat(t,'" target="').concat(n,'">').concat(n,' </a> .\n<a href= "#" class=search>search</a>'))},P=function(e){for(var t,n=e||[],r=n.length-1;0<=r;r+=-1)if((t=n[r]).date&&"fork"!==t.type)return t.date},N=function(e){var o,t,n,i,r,a,u,c,s,l,f,d,h,p,g,v,m=e.data("data");if(m&&("view"!==(h=e.data("site")||window.location.host)&&"origin"!==h||(h=window.location.host),p=w(m.title),v=P(m.journal))){for(d in t={newer:[],same:[],older:[]},l=y.sites)if(r=l[d],d!==h&&null!=r.sitemap)for(u=0,s=(f=r.sitemap).length;u<s;u++)(a=f[u]).slug===p&&(o=a.date>v?t.newer:a.date<v?t.older:t.same).push({remoteSite:d,item:a});for(c in g=[],t)(o=t[c]).length&&(o.sort(function(e,t){return e.item.date<t.item.date}),n=function(){var e,t,n=[];for(i=e=0,t=o.length;e<t;i=++e){var r=o[i];if(d=r.remoteSite,a=r.item,8<=i)break;n.push('<img class="remote"\nsrc="'.concat(wiki.site(d).flag(),'"\ndata-slug="').concat(p,'"\ndata-site="').concat(d,'"\ntitle="').concat(d,'">'))}return n}(),g.push("".concat(n.join("&nbsp;")," ").concat(c)));if(g)return e.find(".twins").html("<p><span>".concat(g.join(", "),"</span></p>"))}},M=function(e,t){var n,o;t.data("data",e.getRawPage()),e.isRemote()&&t.data("site",e.getRemoteSite()),console.log(".page keys ",function(){for(var e=$(".page"),t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push($(o).data("key"));return t}()),console.log("lineup keys",v.debugKeys()),m.resolutionContext=e.getContext(),t.empty(),n=$("<div class='paper' />"),t.append(n);var r=f(["handle-parent","twins","header","story","backlinks","journal","footer"].map(function(e){if("journal"!==e||$(".editEnable").is(":visible"))return $("<div />").addClass(e).appendTo(n)}),7),i=r[0],a=(r[1],r[2]),u=r[3],c=r[4],s=r[5],l=r[6],r=$("<div />").addClass("page-handle").appendTo(i);return T(a,0,e),F(a,t,e),a=(a=e.seqItems(function(e,t){var n=$('<div class="item '.concat(e.type,'" data-id="').concat(e.id,'">'));return u.append(n),n.data("item",e),t()})).then(function(){var e=$(".page").index(t[0]),e=$(".item").index($($(".page")[e]).find(".item"));return p.renderFrom(e)}).then(function(){return t}),$(".editEnable").is(":visible")&&e.seqActions(function(e,t){return e.separator&&g(s,e.separator),g(s,e.action),t()}),N(t),R(c,e),$(".editEnable").is(":visible")&&L(s),D(l,e),r.css({height:"".concat(u.position().top-i.position().top-5,"px")}),a},B=function(e,t){if(!t.isRemote())return $("img.favicon",e).on("error",function(){return p.get("favicon",function(e){return e.create()})})},z=function(e,t){var n;return e.isLocal()&&t.addClass("local"),e.isRecycler()&&t.addClass("recycler"),e.isRemote()&&t.addClass("remote"),e.isPlugin()&&t.addClass("plugin"),n=M(e,t),B(t,e),o.setUrl(),$(".editEnable").is(":visible")&&(l(t),E(t),A(t)),n},U=function(e,t){return t.data("key",v.addPage(e)),z(e,t)},q=function(e,t){var n,r,o,i,a,u,c,s,l=w(e),f=b();for(s in f.setTitle(e),r=[],u=y.sites)null!=(o=u[s]).sitemap&&null!=(c=d.find(o.sitemap,function(e){return e.slug===l}))&&r.push({type:"reference",site:s,slug:l,title:c.title||l,text:c.synopsis||""});if(0<r.length)for(f.addItem({type:"future",text:"We could not find this page in the expected context.",title:e,create:t}),f.addItem({type:"paragraph",text:"We did find the page in your current neighborhood."}),i=0,a=r.length;i<a;i++)n=r[i],f.addItem(n);else f.addItem({type:"future",text:"We could not find this page.",title:e,create:t});return f},e=function(u){var c=new Promise(function(i,e){var t=f(u.attr("id").split("_rev"),2),n=t[0],r=t[1],o=u.find(".header h1").text().trim(),a={slug:n,rev:r,site:u.data("site")},t=function(){var e=$('a.internal[href="/'.concat(n,'.html"]:last'));return o=o||e.text()||n,e=e.parents(".page").data("key"),null!=(e=v.atKey(e))&&e.getCreate(),e=q(o),(c=U(e,u)).then(function(e){return e.addClass("ghost")}),i(c)},r=function(e){var t,n,r,o;for(c=U(e,u),t=0,n=(r=e.getNeighbors(location.host)).length;t<n;t++)o=r[t],y.registerNeighbor(o);return i(c)};return h.get({whenGotten:r,whenNotGotten:t,pageInformation:a})});return c};t.exports={cycle:e,emitTwins:N,buildPage:U,rebuildPage:z,newFuturePage:q}},{"./actionSymbols":2,"./addToJournal":4,"./lineup":16,"./neighborhood":18,"./page":20,"./pageHandler":21,"./plugin":23,"./random":25,"./resolve":28,"./state":34,underscore:58}],28:[function(e,t,n){"use strict";var a,u,c=e("./page").asSlug;t.exports=u={},u.resolutionContext=[],u.escape=a=function(e){return(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},u.resolveFrom=function(e,t){u.resolutionContext.push(e);try{return t()}finally{u.resolutionContext.pop()}},u.resolveLinks=function(e){var n=[],o=function(e){var t=n.length;return n.push(e),"〖".concat(t,"〗")},t=function(e,t){return n[+t]},r=function(e,t){var n=c(t);return n.length?o('<a class="internal" href="/'.concat(n,'.html" data-page-name="').concat(n,'" title="').concat(u.resolutionContext.join(" => "),'">').concat(a(t),"</a>")):e},i=function(e,t,n,r){return o('<a class="external" target="_blank" href="'.concat(t,'" title="').concat(t,'" rel="nofollow">').concat(a(r),' <img src="/images/external-link-ltr-icon.png"></a>'))};return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:a)(e=(e||"").replace(/〖(\d+)〗/g,"〖 $1 〗").replace(/\[\[([^\]]+)\]\]/gi,r).replace(/\[((http|https|ftp):.*?) (.*?)\]/gi,i)).replace(/〖(\d+)〗/g,t)}},{"./page":20}],29:[function(e,t,n){"use strict";var u=function(i,t){var e,n,r=function(){for(var e,t=i.story||[],n=[],r=0,o=t.length;r<o;r++)e=t[r],n.push(null!=e?e.id:void 0);return n},o=function(e,t){e=r().indexOf(e)+1;return i.story.splice(e,0,t)},a=function(){var e;if(-1!==(e=r().indexOf(t.id)))return i.story.splice(e,1)};switch(i.story||(i.story=[]),t.type){case"create":null!=t.item&&(null!=t.item.title&&(i.title=t.item.title),null!=t.item.story&&(i.story=t.item.story.slice()));break;case"add":o(t.after,t.item);break;case"edit":-1!==(n=r().indexOf(t.id))?i.story.splice(n,1,t.item):i.story.push(t.item);break;case"move":n=t.order.indexOf(t.id),e=t.order[n-1],n=i.story[r().indexOf(t.id)],a(),o(e,n);break;case"remove":a()}return i.journal||(i.journal=[]),i.journal.push(t)};t.exports={create:function(e,t){for(var n,r=t.journal.slice(0,+(e=+e)+1||9e9),o={title:t.title,story:[]},i=0,a=r.length;i<a;i++)n=r[i],u(o,n||{});return o},apply:u}},{}],30:[function(e,t,n){"use strict";var g=e("./pageHandler"),v=e("./random"),c=e("./link"),s=(e("./active"),e("./page").newPage),o=e("./resolve"),i=e("./page"),m=function(e,t){var n,r=t.slug;return r=(r=null!=t.title?r||i.asSlug(t.title):r)||"welcome-visitors",n=t.site,o.resolveFrom(n,function(){return e.append("<p>\n  <img class='remote'\n    src='".concat(wiki.site(n).flag(),"'\n    title='").concat(n,"'\n    data-site=\"").concat(n,'"\n    data-slug="').concat(r,'"\n  >\n  ').concat(o.resolveLinks("[[".concat(t.title||r,"]]")),"\n  —\n  ").concat(o.resolveLinks(t.text),"\n</p>"))})},y=function(e,t){return e.preventDefault(),e.shiftKey||(i=$(e.target).parents(".page")),c.doInternalLink(t,i,$(e.target).data("site")),!1},e=function(e){var p=e.neighborhood;return{incrementalSearch:function(e){var t,n,r,o,i,a,u,c,s,l,f,d,h;if(!(e.length<2)){for(0===$(".incremental-search").length&&(u=$(".searchbox").position(),$("<div/>").css("left","".concat(u.left,"px")).css("bottom","".concat(u.top+$(".searchbox").height(),"px")).addClass("incremental-search").delegate(".internal","click",function(e){var t;return"SPAN"===e.target.nodeName&&(e.target=$(e.target).parent()[0]),t=$(e.target).data("pageName"),t="".concat(t),g.context=$(e.target).attr("title").split(" => "),y(e,t)}).delegate("img.remote","click",function(e){var t;return $(e.target).attr("src").startsWith("data:image/png")?(e.preventDefault(),t=$(e.target).data("site"),wiki.site(t).refresh(function(){})):(t=$(e.target).data("slug"),g.context=[$(e.target).data("site")],y(e,t))}).appendTo($(".searchbox"))),d=p.search(e),h=e.split(" ").map(function(e){return e.toLowerCase()}).filter(String),f=new RegExp("\\b("+e.split(" ").map(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).filter(String).join("|")+")","i"),o=function(e){return e.split(f).map(function(e){return h.includes(e.toLowerCase())?"{{".concat(e,"}}"):e}).join("")},n=$(".incremental-search").empty(),d.finds&&0!==d.finds.length||$("<div/>").text("No results found").addClass("no-results").appendTo(n),l=[],i=r=0,a=(c=d.finds).length;i<a;i++)s=c[i],101===(r+=1)&&$("<div/>").text("".concat(d.finds.length-100," results omitted")).addClass("omitted-results").appendTo(n),100<r||(t=$("<div/>").appendTo(n),s={id:v.itemId(),type:"reference",site:s.site,slug:s.page.slug,title:o(s.page.title),text:o(s.page.synopsis)},m(t,s),l.push(t.html(t.html().split(new RegExp("({{.*?}})","i")).map(function(e){return 0===e.indexOf("{{")?"<span class='search-term'>".concat(e.substring(2,e.length-2),"</span>"):e}).join(""))));return l}$(".incremental-search").remove()},performSearch:function(e){var t,n,r,o,i,a,u=p.search(e);if(u.finds&&1===u.finds.length)return $(".incremental-search").find(".internal").click(),void $(".incremental-search").remove();for($(".incremental-search").remove(),a=u.tally,(i=s()).setTitle("Search for '".concat(e,"'")),i.addParagraph("String '".concat(e,"' found on ").concat(a.finds||"none"," of ").concat(a.pages||"no"," pages from ").concat(a.sites||"no"," sites.\nText matched on ").concat(a.title||"no"," titles, ").concat(a.text||"no"," paragraphs, and ").concat(a.slug||"no"," slugs.\nElapsed time ").concat(a.msec," milliseconds.")),t=0,n=(r=u.finds).length;t<n;t++)o=r[t],i.addItem({type:"reference",site:o.site,slug:o.page.slug,title:o.page.title,text:o.page.synopsis||""});return c.showResult(i)}}};t.exports=e},{"./active":3,"./link":17,"./page":20,"./pageHandler":21,"./random":25,"./resolve":28}],31:[function(e,t,n){"use strict";var r=e("./search"),o=null,i=function(e){return o=r({neighborhood:e})},e=function(){return $("input.search").attr("autocomplete","off"),$("input.search").on("keydown",function(e){if(27===e.keyCode)return $(".incremental-search").remove()}),$("input.search").on("keypress",function(e){if(13===e.keyCode)return e=$(this).val(),o.performSearch(e),$(this).val("")}),$("input.search").on("focus",function(e){var t=$(this).val();return o.incrementalSearch(t)}),$("input.search").on("input",function(e){var t=$(this).val();return o.incrementalSearch(t)})};t.exports={inject:i,bind:e}},{"./search":30}],32:[function(e,t,n){"use strict";var r;t.exports={},r=e("./plugin"),t.exports=function(e){return r.getScript("/security/security.js",function(){return window.plugins.security.setup(e)})}},{"./plugin":23}],33:[function(e,t,n){"use strict";var u,c,i,s,r,l,f,o,d,a=e("async/queue"),e=e("localforage");t.exports=r={},l={},u={},f={},console.log("siteAdapter: loading data"),(s=e.createInstance({name:"routes"})).iterate(function(e,t,n){l[t]=e}).then(function(){return console.log("siteAdapter: data loaded")}).catch(function(e){return console.log("siteAdapter: error loading data ",e)}),(d=e.createInstance({name:"withCredentials"})).iterate(function(e,t,n){u[t]=e}).then(function(){return console.log("siteAdapter: withCredentials data loaded")}).catch(function(e){return console.log("siteAdapter: error loading withCredentials data ",e)}),o=function(n,e,t){var r=new Promise(function(e,t){var n;return n=setTimeout(function(){return clearTimeout(n),t()},3e3)}),o=new Promise(function(e,t){return $.ajax({type:"GET",url:n,success:function(){return e()},error:function(){return t()}})});return Promise.race([r,o]).then(function(){return e()}).catch(function(){return t()})},i=a(function(e,t){var n,r=e.site;return null!=l[r]&&t(l[r]),n="//".concat(r,"/favicon.png"),o(n,function(){return l[r]="//".concat(r),t("//".concat(r))},function(){switch(location.protocol){case"http:":return n="https://".concat(r,"/favicon.png"),o(n,function(){return l[r]="https://".concat(r),t("https://".concat(r))},function(){return l[r]="",t("")});case"https:":return n="/proxy/".concat(r,"/favicon.png"),o(n,function(){return l[r]="/proxy/".concat(r),t("/proxy/".concat(r))},function(){return l[r]="",t("")});default:return l[r]="",t("")}})},8),c=function(n,r){return s.getItem(n).then(function(e){return console.log("findAdapter: ",n,e),null==e?i.push({site:n},function(t){return l[n]=t,s.setItem(n,t).then(function(e){return r(t)}).catch(function(e){return console.log("findAdapter setItem error: ",n,e),r(t)})}):(l[n]=e,r(e))}).catch(function(e){return console.log("findAdapter error: ",n,e),l[n]="",r("")})},r.local={flag:function(){return"/favicon.png"},getURL:function(e){return"/".concat(e)},getDirectURL:function(e){return"/".concat(e)},get:function(e,n){var t,r=function(e,t){if(n)return n(e,t)};if(console.log("wiki.local.get ".concat(e)),t=localStorage.getItem(e.replace(/\.json$/,""))){if(r(null,t=JSON.parse(t)),!n)return Promise.resolve(t)}else if(r(e={msg:"no page named '".concat(e,"' in browser local storage")},null),console.log("tried to local fetch a page that isn't local"),!n)return Promise.reject(e)},put:function(e,t,n){return console.log("wiki.local.put ".concat(e)),localStorage.setItem(e,JSON.stringify(t)),n()},delete:function(e){return console.log("wiki.local.delete ".concat(e)),localStorage.removeItem(e)}},r.origin={flag:function(){return"/favicon.png"},getURL:function(e){return"/".concat(e)},getDirectURL:function(e){return"/".concat(e)},get:function(e,n){var r=function(e,t){if(n)return n(e,t)};return console.log("wiki.origin.get ".concat(e)),$.ajax({type:"GET",dataType:"json",url:"/".concat(e),success:function(e){return r(null,e)},error:function(e,t,n){return r({msg:n,xhr:e},null)}})},getIndex:function(e,n){var r=function(e,t){if(n)return n(e,t)};return console.log("wiki.origin.get ".concat(e)),$.ajax({type:"GET",dataType:"text",url:"/".concat(e),success:function(e){return r(null,e)},error:function(e,t,n){return r({msg:n,xhr:e},null)}})},put:function(e,t,r){return console.log("wiki.orgin.put ".concat(e)),$.ajax({type:"PUT",url:"/page/".concat(e,"/action"),data:{action:JSON.stringify(t)},success:function(){return r(null)},error:function(e,t,n){return r({xhr:e,type:t,msg:n})}})},delete:function(e,r){return console.log("wiki.origin.delete ".concat(e)),$.ajax({type:"DELETE",url:"/".concat(e),success:function(){return r(null)},error:function(e,t,n){return r({xhr:e,type:t,msg:n})}})}},r.recycler={flag:function(){return"/recycler/favicon.png"},getURL:function(e){return"/recycler/".concat(e)},getDirectURL:function(e){return"/recycler/".concat(e)},get:function(e,n){var r=function(e,t){if(n)return n(e,t)};return console.log("wiki.recycler.get ".concat(e)),$.ajax({type:"GET",dataType:"json",url:"/recycler/".concat(e),success:function(e){return r(null,e)},error:function(e,t,n){return r({msg:n,xhr:e},null)}})},delete:function(e,r){return console.log("wiki.recycler.delete ".concat(e)),$.ajax({type:"DELETE",url:"/recycler/".concat(e),success:function(){return r(null)},error:function(e,t,n){return r({xhr:e,type:t,msg:n})}})}},r.site=function(a){var t;return a&&a!==window.location.host?"recycler"===a?r.recycler:(t=function(e){var t,n,r,o,i,a,u;return console.log("creating temp flag for ".concat(e)),(r=document.createElement("canvas")).width=32,r.height=32,n=r.getContext("2d"),a=o=32*Math.random(),i=32-(u=32*Math.random()),e="#"+(t=(255*Math.random()<<0).toString(16))+t+t,t="#"+(t=(255*Math.random()<<0).toString(16))+t+t,(u=n.createRadialGradient(o,a,32,i,u,0)).addColorStop(0,e),u.addColorStop(1,t),n.fillStyle=u,n.fillRect(0,0,32,32),r.toDataURL()},{flag:function(){var e;return null!=l[a]?""===l[a]?null!=f[a]?f[a]:f[a]=t(a):l[a]+"/favicon.png":null!=f[a]?f[a]:(c(a,function(e){var t;return""===e?console.log("Prefix for ".concat(a," is undetermined...")):(console.log("Prefix for ".concat(a," is ").concat(e)),t=f[a],e=l[a]+"/favicon.png",$('img[src="'+t+'"]').attr("src",e),$('a[target="'+a+'"]').attr("style","background-image: url("+e+")"),f[a]=null)}),e=t(a),f[a]=e)},getURL:function(e){return null!=l[a]?""===l[a]?(console.log("".concat(a," is unreachable, can't link to ").concat(e)),""):"".concat(l[a],"/").concat(e):(c(a,function(t){return""===t?console.log("".concat(a," is unreachable")):(console.log("Prefix for ".concat(a," is ").concat(t,", about to fixup links")),$('a[target="'+a+'"]').each(function(){var e=/proxy/.test(t)?(e=t.substring(7),"http://".concat(e)):t;return $(this).attr("href","".concat(e,"/").concat($(this).data("slug"),".html"))}))}),"")},getDirectURL:function(e){var t,n;return null!=l[a]?""===l[a]?(console.log("".concat(a," is unreachable, can't link to ").concat(e)),""):(t=/proxy/.test(l[a])?(n=l[a].substring(7),"http://".concat(n)):l[a],"".concat(t,"/").concat(e)):(c(a,function(e){return""===e?console.log("".concat(a," is unreachable")):(console.log("Prefix for ".concat(a," is ").concat(e,", about to fixup links")),$('a[target="'+a+'"]').each(function(){return t=/proxy/.test(e)?(n=e.substring(7),"http://".concat(n)):e,$(this).attr("href","".concat(t,"/").concat($(this).data("slug"),".html"))}))}),"")},get:function(t,o){var n,r=function(e,t){if(o)return o(e,t)},i=function(t,r){var n="".concat(l[a],"/").concat(t),e=u[a]||!1;return $.ajax({type:"GET",dataType:"json",url:n,xhrFields:{withCredentials:e},success:function(e){return"Login Required"!==e.title||n.includes("login-required")||!0===u[a]?(r(null,e),o?void 0:Promise.resolve(e)):(u[a]=!0,i(t,function(e,t){return e?u[a]=!1:d.setItem(a,!0),r(e,t)}))},error:function(e,t,n){if(r({msg:n,xhr:e},null),!o)return Promise.reject(n)}})};return null!=l[a]?""!==l[a]?i(t,r):(console.log("".concat(a," is unreachable")),n={msg:"".concat(a," is unreachable"),xhr:{status:0}},r(n,null),o?void 0:Promise.reject(n)):c(a,function(e){return""!==e?i(t,r):(console.log("".concat(a," is unreachable")),n={msg:"".concat(a," is unreachable"),xhr:{status:0}},r(n,null),o?void 0:Promise.reject(n))})},getIndex:function(t,o){var n,r=function(e,t){if(o)return o(e,t)},i=function(t,r){var n="".concat(l[a],"/").concat(t),e=u[a]||!1;return $.ajax({type:"GET",dataType:"text",url:n,xhrFields:{withCredentials:e},success:function(e){return"Login Required"!==e.title||n.includes("login-required")||!0===u[a]?(r(null,e),o?void 0:Promise.resolve(e)):(u[a]=!0,i(t,function(e,t){return e?u[a]=!1:d.setItem(a,!0),r(e,t)}))},error:function(e,t,n){if(r({msg:n,xhr:e},null),!o)return Promise.reject(n)}})};return null!=l[a]?""!==l[a]?i(t,r):(console.log("".concat(a," is unreachable")),n={msg:"".concat(a," is unreachable"),xhr:{status:0}},r(n,null),o?void 0:Promise.reject(n)):c(a,function(e){return""!==e?i(t,r):(console.log("".concat(a," is unreachable")),n={msg:"".concat(a," is unreachable"),xhr:{status:0}},r(n,null),o?void 0:Promise.reject(n))})},refresh:function(n){var r,o;return console.log("Refreshing ".concat(a)),null==f[a]&&(o=t(a),f[a]=o,r=l[a]+"/favicon.png",$('img[src="'+r+'"]').attr("src",o),$('a[target="'+a+'"]').attr("style","background-image: url("+o+")")),l[a]=null,s.removeItem(a).then(function(){return i.push({site:a},function(t){return s.setItem(a,t).then(function(e){return""===t?console.log("Refreshed prefix for ".concat(a," is undetermined...")):(console.log("Refreshed prefix for ".concat(a," is ").concat(t)),o=f[a],r=l[a]+"/favicon.png",$('img[src="'+o+'"]').attr("src",r),$('a[target="'+a+'"]').attr("style","background-image: url("+r+")")),n()}).catch(function(e){return console.log("findAdapter setItem error: ",a,e),l[a]="",n()})})}).catch(function(e){return console.log("refresh error ",a,e),n()})}}):r.origin}},{"async/queue":46,localforage:56}],34:[function(e,t,n){"use strict";var d,c=[].indexOf,h=e("./active"),p=e("./lineup"),g=null;t.exports=d={},d.inject=function(e){return g=e},d.pagesInDom=function(){return $.makeArray($(".page").map(function(e,t){return t.id}))},d.urlPages=function(){var o;return function(){for(var e=$(location).attr("pathname").split("/"),t=[],n=0,r=e.length;n<r;n+=2)o=e[n],t.push(o);return t}().slice(1)},d.locsInDom=function(){return $.makeArray($(".page").map(function(e,t){return $(t).data("site")||"view"}))},d.urlLocs=function(){for(var e,t=$(location).attr("pathname").split("/").slice(1),n=[],r=0,o=t.length;r<o;r+=2)e=t[r],n.push(e);return n},d.setUrl=function(){var r,o,i,a,e;if(document.title=p.bestTitle(),history&&history.pushState&&(o=d.locsInDom(),a=d.pagesInDom(),(e=function(){var e,t,n=[];for(r=e=0,t=a.length;e<t;r=++e)i=a[r],n.push("/".concat((null!=o?o[r]:void 0)||"view","/").concat(i));return n}().join(""))!==$(location).attr("pathname")))return history.pushState(null,null,e)},d.debugStates=function(){var o;return console.log("a .page keys ",function(){for(var e=$(".page"),t=[],n=0,r=e.length;n<r;n++)o=e[n],t.push($(o).data("key"));return t}()),console.log("a lineup keys",p.debugKeys())},d.show=function(e){var t,n,r,o,i,a,u,c,s=d.pagesInDom(),l=d.urlPages(),f=(d.locsInDom(),d.urlLocs());if(location.pathname&&"/"!==location.pathname){for(a=!0,t=n=0,o=s.length;n<o;t=++n)u=s[t],(a=a&&u===l[t])||(c=$(".page:last"),p.removeKey(c.data("key")),c.remove());for(a=!0,t=r=0,i=l.length;r<i;t=++r)u=l[t],(a=a&&u===s[t])||(console.log("push",t,u),g.showPage(u,f[t]));return d.debugStates(),h.set($(".page").last()),document.title=p.bestTitle()}},d.first=function(){var e,t,n,r,o,i,a,u;for(d.setUrl(),t=d.urlPages(),e=d.urlLocs(),i=d.pagesInDom(),a=[],n=r=0,o=t.length;r<o;n=++r)u=t[n],c.call(i,u)<0&&(""!==u?a.push(g.createPage(u,e[n])):a.push(void 0));return a}},{"./active":3,"./lineup":16}],35:[function(e,t,n){"use strict";t.exports=function(e){var t,n,r=e.synopsis;return(r=(r=null!=e&&null!=e.story?(t=e.story[0],n=e.story[1],t&&"paragraph"===t.type&&(r=r||t.text),n&&"paragraph"===n.type&&(r=r||n.text),t&&null!=t.text&&(r=r||t.text),(r=n&&null!=n.text?r||n.text:r)||null!=e.story&&"A page with ".concat(e.story.length," items.")):"A page with no story.").trim().split(/\r|\n/,1)[0]).substring(0,560)}},{}],36:[function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=!1,a=null,u=null,c=null,s=null,l=function(){return $(document).keydown(function(e){if(16===e.keyCode)return f(e)}).keyup(function(e){if(16===e.keyCode)return d(e)}),$(".main").delegate(".item","mouseenter",g).delegate(".item","mouseleave",v).delegate(".action","mouseenter",m).delegate(".action","mouseleave",y).delegate(".page","align-item",x).delegate(".backlinks .remote","mouseenter",b).delegate(".backlinks .remote","mouseleave",w)},f=function(e){if((i=e.shiftKey)&&($(".emit").addClass("highlight"),(e=a||c)&&$("[data-id=".concat(e,"]")).addClass("target"),u&&(s=u.consuming)))return s.forEach(function(e){return p(e).addClass("consumed")})},d=function(e){if(!(i=e.shiftKey))return $(".emit").removeClass("highlight"),$(".item, .action").removeClass("target"),$(".item").removeClass("consumed")},h=function(n){var e=$(".page").filter(function(e,t){return $(t).data("key")===n});return 0===e.length?null:(1<e.length&&console.log("warning: more than one page found for",key,e),e)},p=function(e){var t=r(e.split("/"),2),n=t[0],t=t[1],n=h(n);return!n||0===(t=n.find(".item[data-id=".concat(t,"]"))).length?null:(1<t.length&&console.log("warning: more than one item found for",e,t),t)},g=function(e){var t,n;if(a=(n=$(this)).attr("data-id"),u=n[0],i&&($("[data-id=".concat(a,"]")).addClass("target"),t=$(this).parents(".page:first").data("key"),n=n.offset().top,$(".page").trigger("align-item",{key:t,id:a,place:n}),s=u.consuming))return s.forEach(function(e){return p(e).addClass("consumed")})},v=function(e){return i&&($(".item, .action").removeClass("target"),$(".item").removeClass("consumed")),u=a=null},m=function(e){var t;if(c=$(this).data("id"),i)return $("[data-id=".concat(c,"]")).addClass("target"),t=$(this).parents(".page:first").data("key"),$(".page").trigger("align-item",{key:t,id:c})},y=function(e){return i&&$("[data-id=".concat(c,"]")).removeClass("target"),c=null},b=function(e){var t,n;if(a=(n=$(this)).attr("data-id"),u=n[0],i)return $("[data-id=".concat(a,"]")).addClass("target"),t=$(this).parents(".page:first").data("key"),n=n.offset().top,$(".page").trigger("align-item",{key:t,id:a,place:n})},w=function(e){return i&&$(".item, .action").removeClass("target"),u=a=null},x=function(e,t){var n,r=$(this);if(r.data("key")!==t.key&&(n=r.find(".item[data-id=".concat(t.id,"]"))).length)return t=t.place||r.height()/2,t=n.offset().top+r.scrollTop()-t,r.stop().animate({scrollTop:t},"slow")};t.exports={bind:l}},{}],37:[function(e,t,n){"use strict";t.exports=t={},t.formatTime=function(e){var t=new Date(1e10<e?e:1e3*e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getHours(),o=r<12?"AM":"PM";return r=0===r?12:12<r?r-12:r,e=(t.getMinutes()<10?"0":"")+t.getMinutes(),"".concat(r,":").concat(e," ").concat(o,"<br>").concat(t.getDate()," ").concat(n," ").concat(t.getFullYear())},t.formatDate=function(e){var t=new Date(e),n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getDate(),i=t.getFullYear(),a=t.getHours(),u=a<12?"AM":"PM";return a=0===a?12:12<a?a-12:a,e=(t.getMinutes()<10?"0":"")+t.getMinutes(),t=(t.getSeconds()<10?"0":"")+t.getSeconds(),"".concat(n," ").concat(r," ").concat(o,", ").concat(i,"<br>").concat(a,":").concat(e,":").concat(t," ").concat(u)},t.formatElapsedTime=function(e){var t,n=(new Date).getTime()-e;return(t=n/1e3)<2?"".concat(Math.floor(n)," milliseconds ago"):(e=t/60)<2?"".concat(Math.floor(t)," seconds ago"):(n=e/60)<2?"".concat(Math.floor(e)," minutes ago"):(t=n/24)<2?"".concat(Math.floor(n)," hours ago"):(e=t/7)<2?"".concat(Math.floor(t)," days ago"):(n=t/31)<2?"".concat(Math.floor(e)," weeks ago"):(t=t/365)<2?"".concat(Math.floor(n)," months ago"):"".concat(Math.floor(t)," years ago")}},{}],38:[function(e,t,n){"use strict";var r={},o=e("./siteAdapter");r.local=o.local,r.origin=o.origin,r.recycler=o.recycler,r.site=o.site,r.asSlug=e("./page").asSlug,r.newPage=e("./page").newPage,o=e("./itemz"),r.removeItem=o.removeItem,r.createItem=o.createItem,r.getItem=o.getItem,o=e("./dialog"),r.dialog=o.open,o=e("./link"),r.createPage=o.createPage,r.doInternalLink=o.doInternalLink,r.showResult=o.showResult,o=e("./plugin"),r.getScript=o.getScript,r.getPlugin=o.getPlugin,r.doPlugin=o.doPlugin,r.registerPlugin=o.registerPlugin,r.getData=function(e){var t;return e?(t=$(".item").index(e),null!=(t=$(".item:lt(".concat(t,")")).filter(".chart,.data,.calculator").last())?t.data("item").data:{}):null!=(t=$(".chart,.data,.calculator").last())?t.data("item").data:{}},r.getDataNodes=function(e){var t=e?(t=$(".item").index(e),$(".item:lt(".concat(t,")")).filter(".chart,.data,.calculator").toArray().reverse()):$(".chart,.data,.calculator").toArray().reverse();return $(t)},r.log=function(){var e;if(null!=("undefined"!=typeof console&&null!==console?console.log:void 0))return(e=console).log.apply(e,arguments)},o=e("./neighborhood"),r.neighborhood=o.sites,r.neighborhoodObject=o,o=e("./pageHandler"),r.pageHandler=o,r.useLocalStorage=o.useLocalStorage,o=e("./resolve"),r.resolveFrom=o.resolveFrom,r.resolveLinks=o.resolveLinks,r.resolutionContext=o.resolutionContext,o=e("./editor"),r.textEditor=o.textEditor,r.util=e("./util"),r.security=e("./security"),r.createSynopsis=e("./synopsis"),r.lineup=e("./lineup"),t.exports=r},{"./dialog":6,"./editor":8,"./itemz":13,"./lineup":16,"./link":17,"./neighborhood":18,"./page":20,"./pageHandler":21,"./plugin":23,"./resolve":28,"./security":32,"./siteAdapter":33,"./synopsis":35,"./util":37}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){if((0,i.isAsync)(r))return function(...e){var t=e.pop();return u(r.apply(this,e),t)};return(0,o.default)(function(e,t){var n;try{n=r.apply(this,e)}catch(e){return t(e)}if(n&&"function"==typeof n.then)return u(n,t);t(null,n)})};var o=a(e("./internal/initialParams")),r=a(e("./internal/setImmediate")),i=e("./internal/wrapAsync");function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return e.then(e=>{c(t,null,e)},e=>{c(t,e&&e.message?e:new Error(e))})}function c(e,t,n){try{e(t,n)}catch(e){(0,r.default)(e=>{throw e},e)}}t.exports=n.default},{"./internal/initialParams":41,"./internal/setImmediate":44,"./internal/wrapAsync":45}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class r{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,--this.length,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1}insertBefore(e,t){t.prev=e.prev,(t.next=e).prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):o(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):o(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var t=this.head;t;){var n=t["next"];e(t)&&this.removeLink(t),t=n}return this}}function o(e,t){e.length=1,e.head=e.tail=t}n.default=r,t.exports=n.default},{}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){return function(...e){var t=e.pop();return n.call(this,e,t)}},t.exports=n.default},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){return function(...e){if(null===n)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,e)}},t.exports=n.default},{}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){if(null==t)t=1;else if(0===t)throw new RangeError("Concurrency must not be zero");var a=(0,m.default)(e),u=0,c=[];const i={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function s(e,t){return e?t?void(i[e]=i[e].filter(e=>e!==t)):i[e]=[]:Object.keys(i).forEach(e=>i[e]=[])}function l(e,...t){i[e].forEach(e=>e(...t))}var f=!1;function r(e,t,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");var o,i;function a(e,...t){return e?n?i(e):o():t.length<=1?o(t[0]):void o(t)}h.started=!0;e={data:e,callback:!n&&r||a};if(t?h._tasks.unshift(e):h._tasks.push(e),f||(f=!0,(0,g.default)(()=>{f=!1,h.process()})),n||!r)return new Promise((e,t)=>{o=e,i=t})}function o(e){return 0===e.length&&h.idle()&&((0,g.default)(()=>l("drain")),1)}e=o=>e=>{if(!e)return new Promise((n,r)=>{!function(t,n){const r=(...e)=>{s(t,r),n(...e)};i[t].push(r)}(o,(e,t)=>e?r(e):void n(t))});var t;s(o),t=o,e=e,i[t].push(e)};var d=!1,h={_tasks:new v.default,*[Symbol.iterator](){yield*h._tasks[Symbol.iterator]()},concurrency:t,payload:n,buffer:t/4,started:!1,paused:!1,push(e,t){return Array.isArray(e)?o(e)?void 0:e.map(e=>r(e,!1,!1,t)):r(e,!1,!1,t)},pushAsync(e,t){return Array.isArray(e)?o(e)?void 0:e.map(e=>r(e,!1,!0,t)):r(e,!1,!0,t)},kill(){s(),h._tasks.empty()},unshift(e,t){return Array.isArray(e)?o(e)?void 0:e.map(e=>r(e,!0,!1,t)):r(e,!0,!1,t)},unshiftAsync(e,t){return Array.isArray(e)?o(e)?void 0:e.map(e=>r(e,!0,!0,t)):r(e,!0,!0,t)},remove(e){h._tasks.remove(e)},process(){if(!d){for(d=!0;!h.paused&&u<h.concurrency&&h._tasks.length;){var e=[],t=[],n=h._tasks.length;h.payload&&(n=Math.min(n,h.payload));for(var r=0;r<n;r++){var o=h._tasks.shift();e.push(o),c.push(o),t.push(o.data)}u+=1,0===h._tasks.length&&l("empty"),u===h.concurrency&&l("saturated");var i=(0,p.default)(function(a){return function(e,...t){--u;for(var n=0,r=a.length;n<r;n++){var o=a[n],i=c.indexOf(o);0===i?c.shift():0<i&&c.splice(i,1),o.callback(e,...t),null!=e&&l("error",e,o.data)}u<=h.concurrency-h.buffer&&l("unsaturated"),h.idle()&&l("drain"),h.process()}}(e));a(t,i)}d=!1}},length(){return h._tasks.length},running(){return u},workersList(){return c},idle(){return h._tasks.length+u===0},pause(){h.paused=!0},resume(){!1!==h.paused&&(h.paused=!1,g.default)(h.process)}};return Object.defineProperties(h,{saturated:{writable:!1,value:e("saturated")},unsaturated:{writable:!1,value:e("unsaturated")},empty:{writable:!1,value:e("empty")},drain:{writable:!1,value:e("drain")},error:{writable:!1,value:e("error")}}),h};var p=r(e("./onlyOnce")),g=r(e("./setImmediate")),v=r(e("./DoublyLinkedList")),m=r(e("./wrapAsync"));function r(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"./DoublyLinkedList":40,"./onlyOnce":42,"./setImmediate":44,"./wrapAsync":45}],44:[function(e,t,u){!function(i,a){!function(){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.fallback=r,u.wrap=o;var e=u.hasQueueMicrotask="function"==typeof queueMicrotask&&queueMicrotask,t=u.hasSetImmediate="function"==typeof a&&a,n=u.hasNextTick="object"==typeof i&&"function"==typeof i.nextTick;function r(e){setTimeout(e,0)}function o(n){return(e,...t)=>n(()=>e(...t))}n=e?queueMicrotask:t?a:n?i.nextTick:r,u.default=o(n)}.call(this)}.call(this,e("_process"),e("timers").setImmediate)},{_process:48,timers:53}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isAsyncIterable=n.isAsyncGenerator=n.isAsync=void 0;var r,o=e("../asyncify"),i=(r=o)&&r.__esModule?r:{default:r};function a(e){return"AsyncFunction"===e[Symbol.toStringTag]}n.default=function(e){if("function"!=typeof e)throw new Error("expected a function");return a(e)?(0,i.default)(e):e},n.isAsync=a,n.isAsyncGenerator=function(e){return"AsyncGenerator"===e[Symbol.toStringTag]},n.isAsyncIterable=function(e){return"function"==typeof e[Symbol.asyncIterator]}},{"../asyncify":39}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=(0,o.default)(e);return(0,r.default)((e,t)=>{n(e[0],t)},t,1)};var r=i(e("./internal/queue")),o=i(e("./internal/wrapAsync"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},{"./internal/queue":43,"./internal/wrapAsync":45}],47:[function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,c=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};var o=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(u,c){return new Promise(function(e,t){function n(e){u.removeListener(c,r),t(e)}function r(){"function"==typeof u.removeListener&&u.removeListener("error",n),e([].slice.call(arguments))}var o,i,a;v(u,c,r,{once:!0}),"error"!==c&&(i=n,a={once:!0},"function"==typeof(o=u).on&&v(o,"error",i,a))})},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i;return s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener||n),o=e._events),i=o[t]),void 0===i?(i=o[t]=n,++e._eventsCount):("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),0<(n=l(e))&&i.length>n&&!i.warned&&(i.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=i.length,n=n,console&&console.warn&&console.warn(n))),e}function d(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function h(e,t,n){e=e._events;if(void 0===e)return[];t=e[t];return void 0===t?[]:"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):g(t,t.length)}function p(e){var t=this._events;if(void 0!==t){e=t[e];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(n,r,o,i){if("function"==typeof n.on)i.once?n.once(r,o):n.on(r,o);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(r,function e(t){i.once&&n.removeEventListener(r,e),o(t)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r,o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){if((r=0<t.length?t[0]:r)instanceof Error)throw r;o=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}e=i[e];if(void 0===e)return!1;if("function"==typeof e)c(e,this,t);else for(var a=e.length,u=g(e,a),n=0;n<a;++n)c(u[n],this,t);return!0},a.prototype.on=a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,o,i,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return 0<this._eventsCount?o(this._events):[]}},{}],48:[function(e,t,n){var r,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var c,s=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&h())}function h(){if(!l){var e=u(d);l=!0;for(var t=s.length;t;){for(c=s,s=[];++f<t;)c&&c[f].run();f=-1,t=s.length}c=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new p(e,t)),1!==s.length||l||u(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],49:[function(e,A,$){!function(E){!function(){!function(e){var t="object"==typeof $&&$&&!$.nodeType&&$,n="object"==typeof A&&A&&!A.nodeType&&A,r="object"==typeof E&&E;r.global!==r&&r.window!==r&&r.self!==r||(e=r);var o,i,v=2147483647,m=36,y=26,a=38,u=700,c=/^xn--/,s=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=m-1,b=Math.floor,w=String.fromCharCode;function x(e){throw new RangeError(f[e])}function h(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function p(e,t){var n=e.split("@"),r="";return 1<n.length&&(r=n[0]+"@",e=n[1]),r+h((e=e.replace(l,".")).split("."),t).join(".")}function k(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function g(e){return h(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,n){var r=0;for(e=n?b(e/u):e>>1,e+=b(e/t);d*y>>1<e;r+=m)e=b(e/d);return b(r+(d+1)*e/(e+a))}function S(e){var t,n,r,o,i,a,u,c=[],s=e.length,l=0,f=128,d=72,h=e.lastIndexOf("-");for(h<0&&(h=0),n=0;n<h;++n)128<=e.charCodeAt(n)&&x("not-basic"),c.push(e.charCodeAt(n));for(r=0<h?h+1:0;r<s;){for(o=l,i=1,a=m;s<=r&&x("invalid-input"),u=e.charCodeAt(r++),(m<=(u=u-48<10?u-22:u-65<26?u-65:u-97<26?u-97:m)||u>b((v-l)/i))&&x("overflow"),l+=u*i,!(u<(u=a<=d?1:d+y<=a?y:a-d));a+=m)i>b(v/(u=m-u))&&x("overflow"),i*=u;d=I(l-o,t=c.length+1,0==o),b(l/t)>v-f&&x("overflow"),f+=b(l/t),l%=t,c.splice(l++,0,f)}return g(c)}function j(e){for(var t,n,r,o,i,a,u,c,s,l,f=[],d=(e=k(e)).length,h=128,p=72,g=t=0;g<d;++g)(u=e[g])<128&&f.push(w(u));for(n=r=f.length,r&&f.push("-");n<d;){for(o=v,g=0;g<d;++g)h<=(u=e[g])&&u<o&&(o=u);for(o-h>b((v-t)/(c=n+1))&&x("overflow"),t+=(o-h)*c,h=o,g=0;g<d;++g)if((u=e[g])<h&&++t>v&&x("overflow"),u==h){for(i=t,a=m;!(i<(s=a<=p?1:p+y<=a?y:a-p));a+=m)f.push(w(_(s+(l=i-s)%(s=m-s),0))),i=b(l/s);f.push(w(_(i,0))),p=I(t,c,n==r),t=0,++n}++t,++h}return f.join("")}if(o={version:"1.4.1",ucs2:{decode:k,encode:g},decode:S,encode:j,toASCII:function(e){return p(e,function(e){return s.test(e)?"xn--"+j(e):e})},toUnicode:function(e){return p(e,function(e){return c.test(e)?S(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return o});else if(t&&n)if(A.exports==t)n.exports=o;else for(i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);else e.punycode=o}(this)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],50:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t=t||"&");t=1e3;r&&"number"==typeof r.maxKeys&&(t=r.maxKeys);var a=e.length;0<t&&t<a&&(a=t);for(var u=0;u<a;++u){var c,s=e[u].replace(i,"%20"),l=s.indexOf(n),l=0<=l?(c=s.substr(0,l),s.substr(l+1)):(c=s,""),s=decodeURIComponent(c),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(o,s)?f(o[s])?o[s].push(l):o[s]=[o[s],l]:o[s]=l}return o};var f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],51:[function(e,t,n){"use strict";function i(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(n,r,o,e){return r=r||"&",o=o||"=","object"==typeof(n=null===n?void 0:n)?u(c(n),function(e){var t=encodeURIComponent(i(e))+o;return a(n[e])?u(n[e],function(e){return t+encodeURIComponent(i(e))}).join(r):t+encodeURIComponent(i(n[e]))}).join(r):e?encodeURIComponent(i(e))+o+encodeURIComponent(i(n)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function u(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var c=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}},{}],52:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":50,"./encode":51}],53:[function(c,e,s){!function(n,u){!function(){var r=c("process/browser.js").nextTick,e=Function.prototype.apply,o=Array.prototype.slice,i={},a=0;function t(e,t){this._id=e,this._clearFn=t}s.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},s.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},s.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},s.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},s._unrefActive=s.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},s.setImmediate="function"==typeof n?n:function(e){var t=a++,n=!(arguments.length<2)&&o.call(arguments,1);return i[t]=!0,r(function(){i[t]&&(n?e.apply(null,n):e.call(null),s.clearImmediate(t))}),t},s.clearImmediate="function"==typeof u?u:function(e){delete i[e]}}.call(this)}.call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":48,timers:53}],54:[function(e,t,n){"use strict";var j=e("punycode"),E=e("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=o,n.resolve=function(e,t){return o(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},n.format=function(e){E.isString(e)&&(e=o(e));return e instanceof x?e.format():x.prototype.format.call(e)},n.Url=x;var A=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,$=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),C=["'"].concat(n),O=["%","/","?",";","#"].concat(C),T=["/","?","#"],F=/^[+a-z0-9A-Z_-]{0,63}$/,L=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},D={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},N=e("querystring");function o(e,t,n){if(e&&E.isObject(e)&&e instanceof x)return e;var r=new x;return r.parse(e,t,n),r}x.prototype.parse=function(e,t,n){if(!E.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",r=e.split(o);r[0]=r[0].replace(/\\/g,"/");var i=(i=e=r.join(o)).trim();if(!n&&1===e.split("#").length){var a=$.exec(i);if(a)return this.path=i,this.href=i,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?N.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u,a=A.exec(i);if(a&&(S=(a=a[0]).toLowerCase(),this.protocol=S,i=i.substr(a.length)),(n||a||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(u="//"===i.substr(0,2))||a&&D[a]||(i=i.substr(2),this.slashes=!0)),!D[a]&&(u||a&&!P[a])){for(var c=-1,s=0;s<T.length;s++)-1!==(l=i.indexOf(T[s]))&&(-1===c||l<c)&&(c=l);-1!==(x=-1===c?i.lastIndexOf("@"):i.lastIndexOf("@",c))&&(k=i.slice(0,x),i=i.slice(x+1),this.auth=decodeURIComponent(k));for(var l,c=-1,s=0;s<O.length;s++)-1!==(l=i.indexOf(O[s]))&&(-1===c||l<c)&&(c=l);-1===c&&(c=i.length),this.host=i.slice(0,c),i=i.slice(c),this.parseHost(),this.hostname=this.hostname||"";var f="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!f)for(var d=this.hostname.split(/\./),s=0,h=d.length;s<h;s++){var p=d[s];if(p&&!p.match(F)){for(var g="",v=0,m=p.length;v<m;v++)127<p.charCodeAt(v)?g+="x":g+=p[v];if(!g.match(F)){var y=d.slice(0,s),b=d.slice(s+1),w=p.match(L);w&&(y.push(w[1]),b.unshift(w[2])),b.length&&(i="/"+b.join(".")+i),this.hostname=y.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),f||(this.hostname=j.toASCII(this.hostname));var x=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+x,this.href+=this.host,f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!R[S])for(s=0,h=C.length;s<h;s++){var _,I=C[s];-1!==i.indexOf(I)&&((_=encodeURIComponent(I))===I&&(_=escape(I)),i=i.split(I).join(_))}f=i.indexOf("#");-1!==f&&(this.hash=i.substr(f),i=i.slice(0,f));var S,f=i.indexOf("?");return-1!==f?(this.search=i.substr(f),this.query=i.substr(f+1),t&&(this.query=N.parse(this.query)),i=i.slice(0,f)):t&&(this.search="",this.query={}),i&&(this.pathname=i),P[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(x=this.pathname||"",S=this.search||"",this.path=x+S),this.href=this.format(),this},x.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&E.isObject(this.query)&&Object.keys(this.query).length&&(i=N.stringify(this.query));i=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||P[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o=o||"",r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),t+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(i=i.replace("#","%23"))+r},x.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},x.prototype.resolveObject=function(e){E.isString(e)&&((h=new x).parse(e,!1,!0),e=h);for(var t=new x,n=Object.keys(this),r=0;r<n.length;r++){var o=n[r];t[o]=this[o]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),a=0;a<i.length;a++){var u=i[a];"protocol"!==u&&(t[u]=e[u])}return P[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!P[e.protocol]){for(var c=Object.keys(e),s=0;s<c.length;s++){var l=c[s];t[l]=e[l]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||D[e.protocol])t.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),t.pathname=f.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(p=t.pathname||"",g=t.search||"",t.path=p+g),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var d=t.pathname&&"/"===t.pathname.charAt(0),h=e.host||e.pathname&&"/"===e.pathname.charAt(0),p=h||d||t.host&&e.pathname,g=p,v=t.pathname&&t.pathname.split("/")||[],f=e.pathname&&e.pathname.split("/")||[],d=t.protocol&&!P[t.protocol];if(d&&(t.hostname="",t.port=null,t.host&&(""===v[0]?v[0]=t.host:v.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),p=p&&(""===f[0]||""===v[0])),h)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,v=f;else if(f.length)(v=v||[]).pop(),v=v.concat(f),t.search=e.search,t.query=e.query;else if(!E.isNullOrUndefined(e.search))return d&&(t.hostname=t.host=v.shift(),(w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift())),t.search=e.search,t.query=e.query,E.isNull(t.pathname)&&E.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!v.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var m=v.slice(-1)[0],h=(t.host||e.host||1<v.length)&&("."===m||".."===m)||""===m,y=0,b=v.length;0<=b;b--)"."===(m=v[b])?v.splice(b,1):".."===m?(v.splice(b,1),y++):y&&(v.splice(b,1),y--);if(!p&&!g)for(;y--;)v.unshift("..");!p||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),h&&"/"!==v.join("/").substr(-1)&&v.push("");var w,h=""===v[0]||v[0]&&"/"===v[0].charAt(0);return d&&(t.hostname=t.host=!h&&v.length?v.shift():"",(w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift())),(p=p||t.host&&v.length)&&!h&&v.unshift(""),v.length?t.pathname=v.join("/"):(t.pathname=null,t.path=null),E.isNull(t.pathname)&&E.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},x.prototype.parseHost=function(){var e=this.host,t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":55,punycode:49,querystring:52}],55:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],56:[function(s,t,n){!function(r){!function(){!function(e){"object"==typeof n&&void 0!==t?t.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).localforage=e()}(function(){return function r(o,i,a){function u(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof s&&s;if(!e&&t)return t(n,!0);if(c)return c(n,!0);t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}t=i[n]={exports:{}};o[n][0].call(t.exports,function(e){var t=o[n][1][e];return u(t||e)},t,t.exports,r,o,i,a)}return i[n].exports}for(var c="function"==typeof s&&s,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,s,t){!function(t){"use strict";var e,n,r,o,i=t.MutationObserver||t.WebKitMutationObserver,a=i?(e=0,i=new i(c),n=t.document.createTextNode(""),i.observe(n,{characterData:!0}),function(){n.data=e=++e%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)}:((r=new t.MessageChannel).port1.onmessage=c,function(){r.port2.postMessage(0)}),u=[];function c(){var e,t;o=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}o=!1}s.exports=function(e){1!==u.push(e)||o||a()}}.call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var o=e(1);function c(){}var s={},i=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==c&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(t,n,r){o(function(){var e;try{e=n(r)}catch(e){return s.reject(t,e)}e===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,e)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(t,e){var n=!1;function r(e){n||(n=!0,s.reject(t,e))}function o(e){n||(n=!0,s.resolve(t,e))}var i=p(function(){e(o,r)});"error"===i.status&&r(i.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=u).prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(c);return this.state!==r?f(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){s.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return s.reject(e,n.value);n=n.value;if(n)h(e,n);else{e.state=a,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){if(e instanceof this)return e;return s.resolve(new this(c),e)},u.reject=function(e){var t=new this(c);return s.reject(t,e)},u.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);var i=new Array(r),a=0,t=-1,u=new this(c);for(;++t<r;)!function(e,t){n.resolve(e).then(function(e){i[t]=e,++a!==r||o||(o=!0,s.resolve(u,i))},function(e){o||(o=!0,s.reject(u,e))})}(e[t],t);return u},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var o=-1,i=new this(c);for(;++o<n;)!function(e){t.resolve(e).then(function(e){r||(r=!0,s.resolve(i,e))},function(e){r||(r=!0,s.reject(i,e))})}(e[o]);return i}},{1:1}],3:[function(t,e,n){!function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}.call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var u=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function d(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function s(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var a="local-forage-detect-blob-support",o=void 0,h={},p=Object.prototype.toString,g="readonly",v="readwrite";function m(e){return"boolean"==typeof o?l.resolve(o):(r=e,new l(function(n){var e=r.transaction(a,v),t=i([""]);e.objectStore(a).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1}).then(function(e){return o=e}));var r}function y(e){var e=h[e.name],n={};n.promise=new l(function(e,t){n.resolve=e,n.reject=t}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function b(e){e=h[e.name].deferredOperations.pop();return e&&(e.resolve(),e.promise)}function w(e,t){e=h[e.name].deferredOperations.pop();if(e)return e.reject(t),e.promise}function x(o,i){return new l(function(t,n){if(h[o.name]=h[o.name]||$(),o.db){if(!i)return t(o.db);y(o),o.db.close()}var e=[o.name];i&&e.push(o.version);var r=u.open.apply(u,e);i&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(o.storeName),t.oldVersion<=1&&e.createObjectStore(a)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+o.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+o.storeName+'" already exists.')}}),r.onerror=function(e){e.preventDefault(),n(r.error)},r.onsuccess=function(){var e=r.result;e.onversionchange=function(e){e.target.close()},t(e),b(o)}})}function k(e){return x(e,!1)}function _(e){return x(e,!0)}function I(e,t){if(!e.db)return 1;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;return r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(o||n)&&(!n||(n=e.db.version+1)>e.version&&(e.version=n),1)}function S(e){return i([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(atob(e.data))],{type:e.type})}function j(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,n=t._initReady().then(function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(n,e,e),n}function A(t,n,r,o){void 0===o&&(o=1);try{var e=t.db.transaction(t.storeName,n);r(null,e)}catch(e){if(0<o&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return l.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),_(t)}).then(function(){return function(n){y(n);for(var r=h[n.name],o=r.forages,e=0;e<o.length;e++){var t=o[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return n.db=null,k(n).then(function(e){return n.db=e,I(n)?_(n):e}).then(function(e){n.db=r.db=e;for(var t=0;t<o.length;t++)o[t]._dbInfo.db=e}).catch(function(e){throw w(n,e),e})}(t).then(function(){A(t,n,r,o-1)})}).catch(r);r(e)}}function $(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}var C={_driver:"asyncStorage",_initStorage:function(e){var r=this,o={db:null};if(e)for(var t in e)o[t]=e[t];var i=h[o.name];i||(i=$(),h[o.name]=i),i.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=E);var n=[];function a(){return l.resolve()}for(var u=0;u<i.forages.length;u++){var c=i.forages[u];c!==r&&n.push(c._initReady().catch(a))}var s=i.forages.slice(0);return l.all(n).then(function(){return o.db=i.db,k(o)}).then(function(e){return o.db=e,I(o,r._defaultConfig.version)?_(o):e}).then(function(e){o.db=i.db=e,r._dbInfo=o;for(var t=0;t<s.length;t++){var n=s[t];n!==r&&(n._dbInfo.db=o.db,n._dbInfo.version=o.version)}})},_support:function(){try{if(!u||!u.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(a,e){var u=this,t=new l(function(o,i){u.ready().then(function(){A(u._dbInfo,g,function(e,t){if(e)return i(e);try{var n=t.objectStore(u._dbInfo.storeName).openCursor(),r=1;n.onsuccess=function(){var e,t=n.result;t?(j(e=t.value)&&(e=S(e)),void 0!==(e=a(e,t.key,r++))?o(e):t.continue()):o()},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return f(t,e),t},getItem:function(i,e){var a=this;i=d(i);var t=new l(function(r,o){a.ready().then(function(){A(a._dbInfo,g,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).get(i);n.onsuccess=function(){var e=n.result;j(e=void 0===e?null:e)&&(e=S(e)),r(e)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)});return f(t,e),t},setItem:function(u,t,e){var c=this;u=d(u);var n=new l(function(i,a){var e;c.ready().then(function(){return e=c._dbInfo,"[object Blob]"===p.call(t)?m(e.db).then(function(e){return e?t:(r=t,new l(function(t,e){var n=new FileReader;n.onerror=e,n.onloadend=function(e){e=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:e,type:r.type})},n.readAsBinaryString(r)}));var r}):t}).then(function(o){A(c._dbInfo,v,function(e,t){if(e)return a(e);try{var n=t.objectStore(c._dbInfo.storeName);null===o&&(o=void 0);var r=n.put(o,u);t.oncomplete=function(){i(o=void 0===o?null:o)},t.onabort=t.onerror=function(){var e=r.error||r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)});return f(n,e),n},removeItem:function(i,e){var a=this;i=d(i);var t=new l(function(r,o){a.ready().then(function(){A(a._dbInfo,v,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).delete(i);t.oncomplete=function(){r()},t.onerror=function(){o(n.error)},t.onabort=function(){var e=n.error||n.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return f(t,e),t},clear:function(e){var i=this,t=new l(function(r,o){i.ready().then(function(){A(i._dbInfo,v,function(e,t){if(e)return o(e);try{var n=t.objectStore(i._dbInfo.storeName).clear();t.oncomplete=function(){r()},t.onabort=t.onerror=function(){var e=n.error||n.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return f(t,e),t},length:function(e){var i=this,t=new l(function(r,o){i.ready().then(function(){A(i._dbInfo,g,function(e,t){if(e)return o(e);try{var n=t.objectStore(i._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)});return f(t,e),t},key:function(u,e){var c=this,t=new l(function(i,a){u<0?i(null):c.ready().then(function(){A(c._dbInfo,g,function(e,t){if(e)return a(e);try{var n=t.objectStore(c._dbInfo.storeName),r=!1,o=n.openKeyCursor();o.onsuccess=function(){var e=o.result;e?0===u||r?i(e.key):(r=!0,e.advance(u)):i(null)},o.onerror=function(){a(o.error)}}catch(e){a(e)}})}).catch(a)});return f(t,e),t},keys:function(e){var a=this,t=new l(function(o,i){a.ready().then(function(){A(a._dbInfo,g,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).openKeyCursor(),r=[];n.onsuccess=function(){var e=n.result;e?(r.push(e.key),e.continue()):o(r)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return f(t,e),t},dropInstance:function(a,e){e=s.apply(this,arguments);var t,n=this.config();return(a="function"!=typeof a&&a||{}).name||(a.name=a.name||n.name,a.storeName=a.storeName||n.storeName),f(t=a.name?(t=a.name===n.name&&this._dbInfo.db?l.resolve(this._dbInfo.db):k(a).then(function(e){var t=h[a.name],n=t.forages;t.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e}),a.storeName?t.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var o=e.version+1;y(a);var r=h[a.name],i=r.forages;e.close();for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=null,n._dbInfo.version=o}return new l(function(t,n){var r=u.open(a.name,o);r.onerror=function(e){r.result.close(),n(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(a.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,b(n._dbInfo)}}).catch(function(e){throw(w(a,e)||l.resolve()).catch(function(){}),e})}}):t.then(function(e){y(a);var n=h[a.name],r=n.forages;e.close();for(var t=0;t<r.length;t++)r[t]._dbInfo.db=null;return new l(function(t,n){var r=u.deleteDatabase(a.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)b(r[t]._dbInfo)}).catch(function(e){throw(w(a,e)||l.resolve()).catch(function(){}),e})})):l.reject("Invalid arguments"),e),t}};var O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,F="__lfsc__:",L=F.length,R="arbf",D="blob",P=L+R.length,N=Object.prototype.toString;function M(e){var t,n,r,o,i=.75*e.length,a=e.length,u=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);for(var i=new ArrayBuffer(i),c=new Uint8Array(i),s=0;s<a;s+=4)t=O.indexOf(e[s]),n=O.indexOf(e[s+1]),r=O.indexOf(e[s+2]),o=O.indexOf(e[s+3]),c[u++]=t<<2|n>>4,c[u++]=(15&n)<<4|r>>2,c[u++]=(3&r)<<6|63&o;return i}function B(e){for(var t=new Uint8Array(e),n="",r=0;r<t.length;r+=3)n+=O[t[r]>>2],n+=O[(3&t[r])<<4|t[r+1]>>4],n+=O[(15&t[r+1])<<2|t[r+2]>>6],n+=O[63&t[r+2]];return t.length%3==2?n=n.substring(0,n.length-1)+"=":t.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var z={serialize:function(t,n){var e="";if(t&&(e=N.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===N.call(t.buffer))){var r,o=F;t instanceof ArrayBuffer?(r=t,o+=R):(r=t.buffer,"[object Int8Array]"===e?o+="si08":"[object Uint8Array]"===e?o+="ui08":"[object Uint8ClampedArray]"===e?o+="uic8":"[object Int16Array]"===e?o+="si16":"[object Uint16Array]"===e?o+="ur16":"[object Int32Array]"===e?o+="si32":"[object Uint32Array]"===e?o+="ui32":"[object Float32Array]"===e?o+="fl32":"[object Float64Array]"===e?o+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(o+B(r))}else if("[object Blob]"===e){e=new FileReader;e.onload=function(){var e="~~local_forage_type~"+t.type+"~"+B(this.result);n(F+D+e)},e.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),n(null,e)}},deserialize:function(e){if(e.substring(0,L)!==F)return JSON.parse(e);var t,n=e.substring(P),r=e.substring(L,P);r===D&&T.test(n)&&(t=(e=n.match(T))[1],n=n.substring(e[0].length));var o=M(n);switch(r){case R:return o;case D:return i([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:M,bufferToString:B};function U(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function q(e,r,o,i,a,u){e.executeSql(o,i,a,function(e,n){n.code===n.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(e,t){t.rows.length?u(e,n):U(e,r,function(){e.executeSql(o,i,a,u)},u)},u):u(e,n)},u)}function K(a,e,u,c){var s=this;a=d(a);var t=new l(function(o,i){s.ready().then(function(){var n=e=void 0===e?null:e,r=s._dbInfo;r.serializer.serialize(e,function(t,e){e?i(e):r.db.transaction(function(e){q(e,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[a,t],function(){o(n)},function(e,t){i(t)})},function(e){e.code===e.QUOTA_ERR&&(0<c?o(K.apply(s,[a,n,u,c-1])):i(e))})})}).catch(i)});return f(t,u),t}var W={_driver:"webSQLStorage",_initStorage:function(e){var r=this,o={db:null};if(e)for(var t in e)o[t]="string"!=typeof e[t]?e[t].toString():e[t];var n=new l(function(t,n){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(e){return n(e)}o.db.transaction(function(e){U(e,o,function(){r._dbInfo=o,t()},function(e,t){n(t)})},n)});return o.serializer=z,n},_support:"function"==typeof openDatabase,iterate:function(s,e){var t=this,n=new l(function(c,n){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(e){q(e,u,"SELECT * FROM "+u.storeName,[],function(e,t){for(var n=t.rows,r=n.length,o=0;o<r;o++){var i=n.item(o),a=(a=i.value)&&u.serializer.deserialize(a);if(void 0!==(a=s(a,i.key,o+1)))return void c(a)}c()},function(e,t){n(t)})})}).catch(n)});return f(n,e),n},getItem:function(t,e){var i=this;t=d(t);var n=new l(function(r,o){i.ready().then(function(){var n=i._dbInfo;n.db.transaction(function(e){q(e,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){t=(t=t.rows.length?t.rows.item(0).value:null)&&n.serializer.deserialize(t);r(t)},function(e,t){o(t)})})}).catch(o)});return f(n,e),n},setItem:function(e,t,n){return K.apply(this,[e,t,n,1])},removeItem:function(o,e){var i=this;o=d(o);var t=new l(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){q(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[o],function(){n()},function(e,t){r(t)})})}).catch(r)});return f(t,e),t},clear:function(e){var o=this,t=new l(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){q(e,t,"DELETE FROM "+t.storeName,[],function(){n()},function(e,t){r(t)})})}).catch(r)});return f(t,e),t},length:function(e){var o=this,t=new l(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){q(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){t=t.rows.item(0).c;n(t)},function(e,t){r(t)})})}).catch(r)});return f(t,e),t},key:function(o,e){var i=this,t=new l(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){q(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[o+1],function(e,t){t=t.rows.length?t.rows.item(0).key:null;n(t)},function(e,t){r(t)})})}).catch(r)});return f(t,e),t},keys:function(e){var r=this,t=new l(function(o,n){r.ready().then(function(){var t=r._dbInfo;t.db.transaction(function(e){q(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).key);o(n)},function(e,t){n(t)})})}).catch(n)});return f(t,e),t},dropInstance:function(n,e){e=s.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var o=this,t=n.name?new l(function(e){var i,t=n.name===r.name?o._dbInfo.db:openDatabase(n.name,"","",0);n.storeName?e({db:t,storeNames:[n.storeName]}):e((i=t,new l(function(o,n){i.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).name);o({db:i,storeNames:n})},function(e,t){n(t)})},function(e){n(e)})})))}).then(function(a){return new l(function(o,i){a.db.transaction(function(r){for(var e=[],t=0,n=a.storeNames.length;t<n;t++)e.push(function(t){return new l(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){n(t)})})}(a.storeNames[t]));l.all(e).then(function(){o()}).catch(function(e){i(e)})},function(e){i(e)})})}):l.reject("Invalid arguments");return f(t,e),t}};function H(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function J(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),void localStorage.removeItem(e)}catch(e){return 1}}()||0<localStorage.length}function G(e,t){for(var n,r,o=e.length,i=0;i<o;){if((n=e[i])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return 1;i++}}var e={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=H(e,this._defaultConfig),J()?((this._dbInfo=t).serializer=z,l.resolve()):l.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(c,e){var s=this,t=s.ready().then(function(){for(var e=s._dbInfo,t=e.keyPrefix,n=t.length,r=localStorage.length,o=1,i=0;i<r;i++){var a=localStorage.key(i);if(0===a.indexOf(t)){var u=(u=localStorage.getItem(a))&&e.serializer.deserialize(u);if(void 0!==(u=c(u,a.substring(n),o++)))return u}}});return f(t,e),t},getItem:function(n,e){var r=this;n=d(n);var t=r.ready().then(function(){var e=r._dbInfo,t=localStorage.getItem(e.keyPrefix+n);return t=t&&e.serializer.deserialize(t)});return f(t,e),t},setItem:function(a,e,t){var u=this;a=d(a);var n=u.ready().then(function(){var i=e=void 0===e?null:e;return new l(function(n,r){var o=u._dbInfo;o.serializer.serialize(e,function(e,t){if(t)r(t);else try{localStorage.setItem(o.keyPrefix+a,e),n(i)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})});return f(n,t),n},removeItem:function(t,e){var n=this;t=d(t);var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return f(r,e),r},clear:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return f(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return f(t,e),t},key:function(n,e){var r=this,t=r.ready().then(function(){var t,e=r._dbInfo;try{t=localStorage.key(n)}catch(e){t=null}return t=t&&t.substring(e.keyPrefix.length)});return f(t,e),t},keys:function(e){var i=this,t=i.ready().then(function(){for(var e=i._dbInfo,t=localStorage.length,n=[],r=0;r<t;r++){var o=localStorage.key(r);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n});return f(t,e),t},dropInstance:function(t,e){e=s.apply(this,arguments),(t="function"!=typeof t&&t||{}).name||(r=this.config(),t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n=this,r=t.name?new l(function(e){t.storeName?e(H(t,n._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):l.reject("Invalid arguments");return f(r,e),r}},V=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Y={},Q={},X={INDEXEDDB:C,WEBSQL:W,LOCALSTORAGE:e},e=[X.INDEXEDDB._driver,X.WEBSQL._driver,X.LOCALSTORAGE._driver],Z=["dropInstance"],ee=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Z),te={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&(V(n[r])?e[r]=n[r].slice():e[r]=n[r])}return e}function re(e){for(var t in!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,re),X){var n,r;X.hasOwnProperty(t)&&(r=(n=X[t])._driver,this[t]=r,Y[r]||this.defineDriver(n))}this._defaultConfig=ne({},te),this._config=ne({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}e=new(re.prototype.config=function(e){if("object"!==(void 0===e?"undefined":r(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},re.prototype.defineDriver=function(s,e,t){var n=new l(function(t,n){try{var r=s._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!s._driver)return void n(e);for(var o=ee.concat("_initStorage"),i=0,a=o.length;i<a;i++){var u=o[i];if((!G(Z,u)||s[u])&&"function"!=typeof s[u])return void n(e)}!function(){for(var e=0,t=Z.length;e<t;e++){var n=Z[e];s[n]||(s[n]=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),e=l.reject(e);return f(e,arguments[arguments.length-1]),e}}(n))}}();var c=function(e){Y[r]&&console.info("Redefining LocalForage driver: "+r),Y[r]=s,Q[r]=e,t()};"_support"in s?s._support&&"function"==typeof s._support?s._support().then(c,n):c(!!s._support):c(!0)}catch(e){n(e)}});return c(n,e,t),n},re.prototype.driver=function(){return this._driver||null},re.prototype.getDriver=function(e,t,n){e=Y[e]?l.resolve(Y[e]):l.reject(new Error("Driver not found."));return c(e,t,n),e},re.prototype.getSerializer=function(e){var t=l.resolve(z);return c(t,e),t},re.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(n,e,e),n},re.prototype.setDriver=function(e,t,n){var i=this;V(e)||(e=[e]);var r=this._getSupportedDrivers(e);function a(){i._config.driver=i.driver()}function u(e){return i._extend(e),a(),i._ready=i._initStorage(i._config),i._ready}function o(o){return function(){var r=0;return function e(){for(;r<o.length;){var t=o[r];return r++,i._dbInfo=null,i._ready=null,i.getDriver(t).then(u).catch(e)}a();var n=new Error("No available storage method found.");return i._driverSet=l.reject(n),i._driverSet}()}}e=null!==this._driverSet?this._driverSet.catch(function(){return l.resolve()}):l.resolve();return this._driverSet=e.then(function(){var e=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,a(),i._wrapLibraryMethodsWithReady(),i._initDriver=o(r)})}).catch(function(){a();var e=new Error("No available storage method found.");return i._driverSet=l.reject(e),i._driverSet}),c(this._driverSet,t,n),this._driverSet},re.prototype.supports=function(e){return!!Q[e]},re.prototype._extend=function(e){ne(this,e)},re.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},re.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ee.length;e<t;e++)!function(t,n){t[n]=function(){var e=arguments;return t.ready().then(function(){return t[n].apply(t,e)})}}(this,ee[e])},re.prototype.createInstance=function(e){return new re(e)},re);t.exports=e},{3:3}]},{},[4])(4)})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(e,t,n){var r,o;r=this,o=function(){"use strict";var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||t)}var e=(t.prototype.next=function(){var e=this.dive();return this.backtrack(),e},t.prototype.dive=function(){if(0===this._path.length)return{done:!0,value:void 0};var e=r(this._path),t=e.node,e=e.keys;return""===r(e)?{done:!1,value:this.result()}:(this._path.push({node:t[r(e)],keys:Object.keys(t[r(e)])}),this.dive())},t.prototype.backtrack=function(){0!==this._path.length&&(r(this._path).keys.pop(),0<r(this._path).keys.length||(this._path.pop(),this.backtrack()))},t.prototype.key=function(){return this.set._prefix+this._path.map(function(e){e=e.keys;return r(e)}).filter(function(e){return""!==e}).join("")},t.prototype.value=function(){return r(this._path).node[""]},t.prototype.result=function(){return"VALUES"===this._type?this.value():"KEYS"===this._type?this.key():[this.key(),this.value()]},t.prototype[Symbol.iterator]=function(){return this},t);function t(e,t){var n=e._tree,r=Object.keys(n);this.set=e,this._type=t,this._path=0<r.length?[{node:n,keys:r}]:[]}function n(e,c,s){for(var l=[{distance:0,i:0,key:"",node:e}],f={},d=[],t=function(){var e=l.pop(),o=e.node,i=e.distance,a=e.key,n=e.i,u=e.edit;Object.keys(o).forEach(function(r){var e,t;""===r?(e=i+(c.length-n),t=h(f[a]||[null,1/0],2)[1],e<=s&&e<t&&(f[a]=[o[r],e])):function(e,t,n,r,o,i){i.push({distance:0,ia:r,ib:0,edit:o});var a=[];while(i.length>0){var u=i.pop(),c=u.distance,s=u.ia,l=u.ib,f=u.edit;if(l===t.length){a.push({distance:c,i:s,edit:f});continue}if(e[s]===t[l])i.push({distance:c,ia:s+1,ib:l+1,edit:p});else{if(c>=n)continue;if(f!==v)i.push({distance:c+1,ia:s,ib:l+1,edit:m});if(s<e.length){if(f!==m)i.push({distance:c+1,ia:s+1,ib:l,edit:v});if(f!==m&&f!==v)i.push({distance:c+1,ia:s+1,ib:l+1,edit:g})}}}return a}(c,r,s-i,n,u,d).forEach(function(e){var t=e.distance,n=e.i,e=e.edit;l.push({node:o[r],distance:i+t,key:a+r,i:n,edit:e})})})};0<l.length;)t();return f}var r=function(e){return e[e.length-1]},p=0,g=1,v=2,m=3,f=(d.prototype.atPrefix=function(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");var t=h(u(this._tree,e.slice(this._prefix.length)),2),n=t[0],r=t[1];if(void 0===n){var o=h(k(r),2),t=o[0],i=o[1],r=Object.keys(t).find(function(e){return""!==e&&e.startsWith(i)});if(void 0!==r)return new d(((o={})[r.slice(i.length)]=t[r],o),e)}return new d(n||{},e)},d.prototype.clear=function(){delete this._size,this._tree={}},d.prototype.delete=function(e){return delete this._size,b(this._tree,e)},d.prototype.entries=function(){return new e(this,"ENTRIES")},d.prototype.forEach=function(e){var t,n;try{for(var r=s(this),o=r.next();!o.done;o=r.next()){var i=h(o.value,2);e(i[0],i[1],this)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},d.prototype.fuzzyGet=function(e,t){return n(this._tree,e,t)},d.prototype.get=function(e){e=i(this._tree,e);return void 0!==e?e[""]:void 0},d.prototype.has=function(e){e=i(this._tree,e);return void 0!==e&&e.hasOwnProperty("")},d.prototype.keys=function(){return new e(this,"KEYS")},d.prototype.set=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");return delete this._size,c(this._tree,e)[""]=t,this},Object.defineProperty(d.prototype,"size",{get:function(){var e=this;return this._size||(this._size=0,this.forEach(function(){e._size+=1}),this._size)},enumerable:!1,configurable:!0}),d.prototype.update=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");delete this._size;e=c(this._tree,e);return e[""]=t(e[""]),this},d.prototype.values=function(){return new e(this,"VALUES")},d.prototype[Symbol.iterator]=function(){return this.entries()},d.from=function(e){var t,n,r=new d;try{for(var o=s(e),i=o.next();!i.done;i=o.next()){var a=h(i.value,2),u=a[0],c=a[1];r.set(u,c)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},d.fromObject=function(e){return d.from(Object.entries(e))},d);function d(e,t){void 0===t&&(t=""),this._tree=e=void 0===e?{}:e,this._prefix=t}var o,u=function(e,t,n){if(void 0===n&&(n=[]),0===t.length||null==e)return[e,n];var r=Object.keys(e).find(function(e){return""!==e&&t.startsWith(e)});return void 0===r?(n.push([e,t]),u(void 0,"",n)):(n.push([e,r]),u(e[r],t.slice(r.length),n))},i=function(e,t){if(0===t.length||null==e)return e;var n=Object.keys(e).find(function(e){return""!==e&&t.startsWith(e)});return void 0!==n?i(e[n],t.slice(n.length)):void 0},c=function(e,t){if(0===t.length||null==e)return e;var n=Object.keys(e).find(function(e){return""!==e&&t.startsWith(e)});if(void 0!==n)return c(e[n],t.slice(n.length));var r=Object.keys(e).find(function(e){return""!==e&&e.startsWith(t[0])});if(void 0===r)return e[t]={},e[t];var o=y(t,r);return e[o]=((n={})[r.slice(o.length)]=e[r],n),delete e[r],c(e[o],t.slice(o.length))},y=function(e,t,n,r,o){return void 0===n&&(n=0),void 0===o&&(o=""),(r=void 0===r?Math.min(e.length,t.length):r)<=n||e[n]!==t[n]?o:y(e,t,n+1,r,o+e[n])},b=function(e,t){var n=h(u(e,t),2),e=n[0],t=n[1];void 0!==e&&(delete e[""],0===(n=Object.keys(e)).length&&w(t),1===n.length&&x(t,n[0],e[n[0]]))},w=function(e){var t,n;0!==e.length&&(delete(t=(n=h(k(e),2))[0])[n[1]],0===(n=Object.keys(t)).length&&w(e.slice(0,-1)),1===n.length&&""!==n[0]&&x(e.slice(0,-1),n[0],t[n[0]]))},x=function(e,t,n){var r;0!==e.length&&((e=(r=h(k(e),2))[0])[(r=r[1])+t]=n,delete e[r])},k=function(e){return e[e.length-1]},_=(I.prototype.add=function(n){var r=this,e=this._options,o=e.extractField,i=e.tokenize,a=e.processTerm,t=e.fields,u=e.idField,e=o(n,u);if(null==e)throw new Error('MiniSearch: document does not have ID field "'+u+'"');var c=this.addDocumentId(e);this.saveStoredFields(c,n),t.forEach(function(t){var e=o(n,t);null!=e&&(e=i(e.toString(),t),r.addFieldLength(c,r._fieldIds[t],r.documentCount-1,e.length),e.forEach(function(e){e=a(e,t);e&&r.addTerm(r._fieldIds[t],c,e)}))})},I.prototype.addAll=function(e){var t=this;e.forEach(function(e){return t.add(e)})},I.prototype.addAllAsync=function(e,t){var o=this,t=(t=void 0===t?{}:t).chunkSize,i=void 0===t?10:t,t={chunk:[],promise:Promise.resolve()},t=e.reduce(function(e,t,n){var r=e.chunk,e=e.promise;return r.push(t),(n+1)%i==0?{chunk:[],promise:e.then(function(){return new Promise(function(e){return setTimeout(e,0)})}).then(function(){return o.addAll(r)})}:{chunk:r,promise:e}},t),n=t.chunk;return t.promise.then(function(){return o.addAll(n)})},I.prototype.remove=function(n){var r=this,e=this._options,o=e.tokenize,i=e.processTerm,a=e.extractField,t=e.fields,e=e.idField,u=a(n,e);if(null==u)throw new Error('MiniSearch: document does not have ID field "'+e+'"');var c=h(Object.entries(this._documentIds).find(function(e){e=h(e,2);e[0];e=e[1];return u===e})||[],1)[0];if(null==c)throw new Error("MiniSearch: cannot remove document with ID "+u+": it is not in the index");t.forEach(function(t){var e=a(n,t);null!=e&&((e=o(e.toString(),t)).forEach(function(e){e=i(e,t);e&&r.removeTerm(r._fieldIds[t],c,e)}),r.removeFieldLength(c,r._fieldIds[t],r.documentCount,e.length))}),delete this._storedFields[c],delete this._documentIds[c],delete this._fieldLength[c],--this._documentCount},I.prototype.removeAll=function(e){var t=this;if(e)e.forEach(function(e){return t.remove(e)});else{if(0<arguments.length)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new f,this._documentCount=0,this._documentIds={},this._fieldLength={},this._averageFieldLength={},this._storedFields={},this._nextId=0}},I.prototype.search=function(e,i){var a=this;void 0===i&&(i={});e=this.executeQuery(e,i);return Object.entries(e).reduce(function(e,t){var n=h(t,2),r=n[0],o=n[1],t=o.score,n=o.match,o=o.terms,n={id:a._documentIds[r],terms:$(o),score:t,match:n};return Object.assign(n,a._storedFields[r]),null!=i.filter&&!i.filter(n)||e.push(n),e},[]).sort(function(e,t){return e.score<t.score?1:-1})},I.prototype.autoSuggest=function(e,t){void 0===t&&(t={}),t=l(l({},T),t);t=this.search(e,t).reduce(function(e,t){var n=t.score,r=t.terms,t=r.join(" ");return null==e[t]?e[t]={score:n,terms:r,count:1}:(e[t].score+=n,e[t].count+=1),e},{});return Object.entries(t).map(function(e){var t=h(e,2),n=t[0],e=t[1],t=e.score;return{suggestion:n,terms:e.terms,score:t/e.count}}).sort(function(e,t){return e.score<t.score?1:-1})},Object.defineProperty(I.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),I.loadJSON=function(e,t){if(null==t)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return I.loadJS(JSON.parse(e),t)},I.getDefault=function(e){if(C.hasOwnProperty(e))return S(C,e);throw new Error('MiniSearch: unknown option "'+e+'"')},I.loadJS=function(e,t){var n=e.index,r=e.documentCount,o=e.nextId,i=e.documentIds,a=e.fieldIds,u=e.fieldLength,c=e.averageFieldLength,e=e.storedFields,t=new I(t);return t._index=new f(n._tree,n._prefix),t._documentCount=r,t._nextId=o,t._documentIds=i,t._fieldIds=a,t._fieldLength=u,t._averageFieldLength=c,t._fieldIds=a,t._storedFields=e||{},t},I.prototype.executeQuery=function(n,r){var o=this;if(void 0===r&&(r={}),"string"==typeof n)return this.executeSearch(n,r);var e=n.queries.map(function(e){var t=l(l(l({},r),n),{queries:void 0});return o.executeQuery(e,t)});return this.combineResults(e,n.combineWith)},I.prototype.executeSearch=function(e,t){var n=this;void 0===t&&(t={});var r=this._options,o=r.tokenize,i=r.processTerm,r=r.searchOptions,a=l(l({tokenize:o,processTerm:i},r),t),t=a.tokenize,u=a.processTerm,e=t(e).map(function(e){return u(e)}).filter(function(e){return!!e}).map(A(a)).map(function(e){return n.executeQuerySpec(e,a)});return this.combineResults(e,a.combineWith)},I.prototype.executeQuerySpec=function(r,e){var o=this,e=l(l({},this._options.searchOptions),e),i=(e.fields||this._options.fields).reduce(function(e,t){var n;return l(l({},e),((n={})[t]=S(e,t)||1,n))},e.boost||{}),a=e.boostDocument,e=e.weights,e=l(l({},O.weights),e),u=e.fuzzy,c=e.prefix,e=this.termResults(r.term,i,a,this._index.get(r.term));if(!r.fuzzy&&!r.prefix)return e;var s=[e];return r.prefix&&this._index.atPrefix(r.term).forEach(function(e,t){var n=.3*(e.length-r.term.length)/e.length;s.push(o.termResults(e,i,a,t,c,n))}),r.fuzzy&&(e=(e=!0===r.fuzzy?.2:r.fuzzy)<1?Math.round(r.term.length*e):e,Object.entries(this._index.fuzzyGet(r.term,e)).forEach(function(e){var t=h(e,2),n=t[0],e=h(t[1],2),t=e[0],e=e[1]/n.length;s.push(o.termResults(n,i,a,t,u,e))})),s.reduce(j.or,{})},I.prototype.combineResults=function(e,t){if(0===e.length)return{};t=(t=void 0===t?"or":t).toLowerCase();return e.reduce(j[t],null)||{}},I.prototype.toJSON=function(){return{index:this._index,documentCount:this._documentCount,nextId:this._nextId,documentIds:this._documentIds,fieldIds:this._fieldIds,fieldLength:this._fieldLength,averageFieldLength:this._averageFieldLength,storedFields:this._storedFields}},I.prototype.termResults=function(s,e,l,t,n,f){var d=this;return void 0===f&&(f=0),null==t?{}:Object.entries(e).reduce(function(o,e){var e=h(e,2),i=e[0],a=e[1],u=d._fieldIds[i],e=t[u]||{ds:{}},c=e.df,e=e.ds;return Object.entries(e).forEach(function(e){var t=h(e,2),n=t[0],r=t[1],e=l?l(d._documentIds[n],s):1;e&&(t=d._fieldLength[n][u]/d._averageFieldLength[u],o[n]=o[n]||{score:0,match:{},terms:[]},o[n].terms.push(s),o[n].match[s]=S(o[n].match,s)||[],o[n].score+=e*E(r,c,d._documentCount,t,a,f),o[n].match[s].push(i))}),o},{})},I.prototype.addTerm=function(n,r,e){this._index.update(e,function(e){var t=(e=e||{})[n]||{df:0,ds:{}};return null==t.ds[r]&&(t.df+=1),t.ds[r]=(t.ds[r]||0)+1,l(l({},e),((e={})[n]=t,e))})},I.prototype.removeTerm=function(n,r,o){var i=this;this._index.has(o)?(this._index.update(o,function(e){var t=e[n];if(null==t||null==t.ds[r])return i.warnDocumentChanged(r,n,o),e;if(t.ds[r]<=1){if(t.df<=1)return delete e[n],e;--t.df}return t.ds[r]<=1?(delete t.ds[r],e):(--t.ds[r],l(l({},e),((e={})[n]=t,e)))}),0===Object.keys(this._index.get(o)).length&&this._index.delete(o)):this.warnDocumentChanged(r,n,o)},I.prototype.warnDocumentChanged=function(e,t,n){var r;null!=console&&null!=console.warn&&(r=Object.entries(this._fieldIds).find(function(e){e=h(e,2);return e[0],e[1]===t})[0],console.warn("MiniSearch: document with ID "+this._documentIds[e]+' has changed before removal: term "'+n+'" was not present in field "'+r+'". Removing a document after it has changed can corrupt the index!'))},I.prototype.addDocumentId=function(e){var t=this._nextId.toString(36);return this._documentIds[t]=e,this._documentCount+=1,this._nextId+=1,t},I.prototype.addFields=function(e){var n=this;e.forEach(function(e,t){n._fieldIds[e]=t})},I.prototype.addFieldLength=function(e,t,n,r){this._averageFieldLength[t]=this._averageFieldLength[t]||0;var o=this._averageFieldLength[t]*n+r;this._fieldLength[e]=this._fieldLength[e]||{},this._fieldLength[e][t]=r,this._averageFieldLength[t]=o/(n+1)},I.prototype.removeFieldLength=function(e,t,n,r){r=this._averageFieldLength[t]*n-r;this._averageFieldLength[t]=r/(n-1)},I.prototype.saveStoredFields=function(n,r){var o=this,e=this._options,t=e.storeFields,i=e.extractField;null!=t&&0!==t.length&&(this._storedFields[n]=this._storedFields[n]||{},t.forEach(function(e){var t=i(r,e);void 0!==t&&(o._storedFields[n][e]=t)}))},I);function I(e){if(null==(null==e?void 0:e.fields))throw new Error('MiniSearch: option "fields" must be provided');this._options=l(l(l({},C),e),{searchOptions:l(l({},O),e.searchOptions||{})}),this._index=new f,this._documentCount=0,this._documentIds={},this._fieldIds={},this._fieldLength={},this._averageFieldLength={},this._nextId=0,this._storedFields={},this.addFields(this._options.fields)}var S=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},j=((o={}).or=function(e,t){return Object.entries(t).reduce(function(e,t){var n=h(t,2),r=n[0],o=n[1],t=o.score,n=o.match,o=o.terms;return null==e[r]?e[r]={score:t,match:n,terms:o}:(e[r].score+=t,e[r].score*=1.5,(t=e[r].terms).push.apply(t,a([],h(o))),Object.assign(e[r].match,n)),e},e||{})},o.and=function(i,e){return null==i?e:Object.entries(e).reduce(function(e,t){var n=h(t,2),r=n[0],o=n[1],t=o.score,n=o.match,o=o.terms;return void 0===i[r]||(e[r]=e[r]||{},e[r].score=i[r].score+t,e[r].match=l(l({},i[r].match),n),e[r].terms=a(a([],h(i[r].terms)),h(o))),e},{})},o),E=function(e,t,n,r,o,i){return o/(1+.333*o*i)*(e*Math.log(n/t))/r},A=function(r){return function(e,t,n){return{term:e,fuzzy:"function"==typeof r.fuzzy?r.fuzzy(e,t,n):r.fuzzy||!1,prefix:"function"==typeof r.prefix?r.prefix(e,t,n):!0===r.prefix}}},$=function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},C={idField:"id",extractField:function(e,t){return e[t]},tokenize:function(e,t){return e.split(F)},processTerm:function(e,t){return e.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},O={combineWith:"or",prefix:!1,fuzzy:!1,boost:{},weights:{fuzzy:.9,prefix:.75}},T={prefix:function(e,t,n){return t===n.length-1}},F=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;return _},"object"==typeof n&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):(r="undefined"!=typeof globalThis?globalThis:r||self).MiniSearch=o()},{}],58:[function(e,o,i){!function(Dt){!function(){var e,t,n,r;e=this,t=function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof Dt&&Dt.global===Dt&&Dt||Function("return this")()||{},r=Array.prototype,a=Object.prototype,f="undefined"!=typeof Symbol?Symbol.prototype:null,o=r.push,c=r.slice,d=a.toString,n=a.hasOwnProperty,t="undefined"!=typeof ArrayBuffer,i="undefined"!=typeof DataView,u=Array.isArray,s=Object.keys,l=Object.create,h=t&&ArrayBuffer.isView,p=isNaN,g=isFinite,v=!{toString:null}.propertyIsEnumerable("toString"),m=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],y=Math.pow(2,53)-1;function b(o,i){return i=null==i?o.length-1:+i,function(){for(var e=Math.max(arguments.length-i,0),t=Array(e),n=0;n<e;n++)t[n]=arguments[n+i];switch(i){case 0:return o.call(this,t);case 1:return o.call(this,arguments[0],t);case 2:return o.call(this,arguments[0],arguments[1],t)}for(var r=Array(i+1),n=0;n<i;n++)r[n]=arguments[n];return r[i]=t,o.apply(this,r)}}function w(e){var t=typeof e;return"function"==t||"object"==t&&!!e}function x(e){return void 0===e}function k(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)}function _(e){var t="[object "+e+"]";return function(e){return d.call(e)===t}}var I=_("String"),S=_("Number"),j=_("Date"),E=_("RegExp"),A=_("Error"),$=_("Symbol"),C=_("ArrayBuffer"),O=_("Function"),T=e.document&&e.document.childNodes,F=O="function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof T?function(e){return"function"==typeof e||!1}:O,L=_("Object"),R=i&&L(new DataView(new ArrayBuffer(8))),D="undefined"!=typeof Map&&L(new Map),P=_("DataView");var N=R?function(e){return null!=e&&F(e.getInt8)&&C(e.buffer)}:P,M=u||_("Array");function B(e,t){return null!=e&&n.call(e,t)}var z=_("Arguments");!function(){z(arguments)||(z=function(e){return B(e,"callee")})}();var U=z;function q(e){return S(e)&&p(e)}function K(e){return function(){return e}}function W(t){return function(e){e=t(e);return"number"==typeof e&&0<=e&&e<=y}}function H(t){return function(e){return null==e?void 0:e[t]}}var J=H("byteLength"),G=W(J),V=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var Y=t?function(e){return h?h(e)&&!N(e):G(e)&&V.test(d.call(e))}:K(!1),Q=H("length");function X(e,t){t=function(t){for(var n={},e=t.length,r=0;r<e;++r)n[t[r]]=!0;return{contains:function(e){return n[e]},push:function(e){return n[e]=!0,t.push(e)}}}(t);var n=m.length,r=e.constructor,o=F(r)&&r.prototype||a,i="constructor";for(B(e,i)&&!t.contains(i)&&t.push(i);n--;)(i=m[n])in e&&e[i]!==o[i]&&!t.contains(i)&&t.push(i)}function Z(e){if(!w(e))return[];if(s)return s(e);var t,n=[];for(t in e)B(e,t)&&n.push(t);return v&&X(e,n),n}function ee(e,t){var n=Z(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;i<r;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0}function te(e){return e instanceof te?e:this instanceof te?void(this._wrapped=e):new te(e)}function ne(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,J(e))}te.VERSION="1.13.1",te.prototype.valueOf=te.prototype.toJSON=te.prototype.value=function(){return this._wrapped},te.prototype.toString=function(){return String(this._wrapped)};var re="[object DataView]";function oe(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"==o||"object"==o||"object"==typeof t)&&function e(t,n,r,o){t instanceof te&&(t=t._wrapped);n instanceof te&&(n=n._wrapped);var i=d.call(t);if(i!==d.call(n))return!1;if(R&&"[object Object]"==i&&N(t)){if(!N(n))return!1;i=re}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return f.valueOf.call(t)===f.valueOf.call(n);case"[object ArrayBuffer]":case re:return e(ne(t),ne(n),r,o)}var a="[object Array]"===i;if(!a&&Y(t)){var u=J(t);if(u!==J(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof t||"object"!=typeof n)return!1;i=t.constructor,u=n.constructor;if(i!==u&&!(F(i)&&i instanceof i&&F(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1}r=r||[];o=o||[];var c=r.length;for(;c--;)if(r[c]===t)return o[c]===n;r.push(t);o.push(n);if(a){if((c=t.length)!==n.length)return!1;for(;c--;)if(!oe(t[c],n[c],r,o))return!1}else{var s,l=Z(t);if(c=l.length,Z(n).length!==c)return!1;for(;c--;)if(s=l[c],!B(n,s)||!oe(t[s],n[s],r,o))return!1}r.pop();o.pop();return!0}(e,t,n,r)}function ie(e){if(!w(e))return[];var t,n=[];for(t in e)n.push(t);return v&&X(e,n),n}function ae(r){var o=Q(r);return function(e){if(null==e)return!1;var t=ie(e);if(Q(t))return!1;for(var n=0;n<o;n++)if(!F(e[r[n]]))return!1;return r!==fe||!F(e[ue])}}var ue="forEach",ce=["clear","delete"],se=["get","has","set"],le=ce.concat(ue,se),fe=ce.concat(se),de=["add"].concat(ce,ue,"has"),he=D?ae(le):_("Map"),pe=D?ae(fe):_("WeakMap"),ge=D?ae(de):_("Set"),ve=_("WeakSet");function me(e){for(var t=Z(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r}function ye(e){for(var t={},n=Z(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t}function be(e){var t,n=[];for(t in e)F(e[t])&&n.push(t);return n.sort()}function we(c,s){return function(e){var t=arguments.length;if(s&&(e=Object(e)),t<2||null==e)return e;for(var n=1;n<t;n++)for(var r=arguments[n],o=c(r),i=o.length,a=0;a<i;a++){var u=o[a];s&&void 0!==e[u]||(e[u]=r[u])}return e}}var xe=we(ie),ke=we(Z),_e=we(ie,!0);function Ie(e){if(!w(e))return{};if(l)return l(e);var t=function(){};t.prototype=e;e=new t;return t.prototype=null,e}function Se(e){return w(e)?M(e)?e.slice():xe({},e):e}function je(e){return M(e)?e:[e]}function Ee(e){return te.toPath(e)}function Ae(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function $e(e,t,n){t=Ae(e,Ee(t));return x(t)?n:t}function Ce(e){return e}function Oe(t){return t=ke({},t),function(e){return ee(e,t)}}function Te(t){return t=Ee(t),function(e){return Ae(e,t)}}function Fe(o,i,e){if(void 0===i)return o;switch(null==e?3:e){case 1:return function(e){return o.call(i,e)};case 3:return function(e,t,n){return o.call(i,e,t,n)};case 4:return function(e,t,n,r){return o.call(i,e,t,n,r)}}return function(){return o.apply(i,arguments)}}function Le(e,t,n){return null==e?Ce:F(e)?Fe(e,t,n):(w(e)&&!M(e)?Oe:Te)(e)}function Re(e,t){return Le(e,t,1/0)}function De(e,t,n){return te.iteratee!==Re?te.iteratee(e,t):Le(e,t,n)}function Pe(){}function Ne(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}te.toPath=je,te.iteratee=Re;var Me=Date.now||function(){return(new Date).getTime()};function Be(t){function n(e){return t[e]}var e="(?:"+Z(t).join("|")+")",r=RegExp(e),o=RegExp(e,"g");return function(e){return r.test(e=null==e?"":""+e)?e.replace(o,n):e}}var ze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ue=Be(ze),qe=Be(ye(ze)),Ke=te.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},We=/(.)^/,He={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Je=/\\|'|\r|\n|\u2028|\u2029/g;function Ge(e){return"\\"+He[e]}var Ve=/^\s*(\w|\$)+\s*$/;var Ye=0;function Qe(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);n=Ie(e.prototype),o=e.apply(n,o);return w(o)?o:n}var Xe=b(function(o,i){function a(){for(var e=0,t=i.length,n=Array(t),r=0;r<t;r++)n[r]=i[r]===u?arguments[e++]:i[r];for(;e<arguments.length;)n.push(arguments[e++]);return Qe(o,a,this,this,n)}var u=Xe.placeholder;return a});Xe.placeholder=te;var Ze=b(function(t,n,r){if(!F(t))throw new TypeError("Bind must be called on a function");var o=b(function(e){return Qe(t,o,n,this,r.concat(e))});return o}),et=W(Q);function tt(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var o=r.length,i=0,a=Q(e);i<a;i++){var u=e[i];if(et(u)&&(M(u)||U(u)))if(1<t)tt(u,t-1,n,r),o=r.length;else for(var c=0,s=u.length;c<s;)r[o++]=u[c++];else n||(r[o++]=u)}return r}var nt=b(function(e,t){var n=(t=tt(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=Ze(e[r],e)}return e});var rt=b(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),ot=Xe(rt,te,1);function it(e){return function(){return!e.apply(this,arguments)}}function at(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}e=Xe(at,2);function ut(e,t,n){t=De(t,n);for(var r,o=Z(e),i=0,a=o.length;i<a;i++)if(t(e[r=o[i]],r,e))return r}function ct(i){return function(e,t,n){t=De(t,n);for(var r=Q(e),o=0<i?0:r-1;0<=o&&o<r;o+=i)if(t(e[o],o,e))return o;return-1}}var st=ct(1),T=ct(-1);function lt(e,t,n,r){for(var o=(n=De(n,r,1))(t),i=0,a=Q(e);i<a;){var u=Math.floor((i+a)/2);n(e[u])<o?i=u+1:a=u}return i}function ft(i,a,u){return function(e,t,n){var r=0,o=Q(e);if("number"==typeof n)0<i?r=0<=n?n:Math.max(n+o,r):o=0<=n?Math.min(n+1,o):n+o+1;else if(u&&n&&o)return e[n=u(e,t)]===t?n:-1;if(t!=t)return 0<=(n=a(c.call(e,r,o),q))?n+r:-1;for(n=0<i?r:o-1;0<=n&&n<o;n+=i)if(e[n]===t)return n;return-1}}var dt=ft(1,st,lt),O=ft(-1,T);function ht(e,t,n){n=(et(e)?st:ut)(e,t,n);if(void 0!==n&&-1!==n)return e[n]}function pt(e,t,n){if(t=Fe(t,n),et(e))for(o=0,i=e.length;o<i;o++)t(e[o],o,e);else for(var r=Z(e),o=0,i=r.length;o<i;o++)t(e[r[o]],r[o],e);return e}function gt(e,t,n){t=De(t,n);for(var r=!et(e)&&Z(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var u=r?r[a]:a;i[a]=t(e[u],u,e)}return i}function vt(c){return function(e,t,n,r){var o=3<=arguments.length;return function(e,t,n,r){var o=!et(e)&&Z(e),i=(o||e).length,a=0<c?0:i-1;for(r||(n=e[o?o[a]:a],a+=c);0<=a&&a<i;a+=c){var u=o?o[a]:a;n=t(n,e[u],u,e)}return n}(e,Fe(t,r,4),n,o)}}i=vt(1),L=vt(-1);function mt(e,r,t){var o=[];return r=De(r,t),pt(e,function(e,t,n){r(e,t,n)&&o.push(e)}),o}function yt(e,t,n){t=De(t,n);for(var r=!et(e)&&Z(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0}function bt(e,t,n){t=De(t,n);for(var r=!et(e)&&Z(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1}function wt(e,t,n,r){return et(e)||(e=me(e)),0<=dt(e,t,n="number"!=typeof n||r?0:n)}P=b(function(e,n,r){var o,i;return F(n)?i=n:(n=Ee(n),o=n.slice(0,-1),n=n[n.length-1]),gt(e,function(e){var t=i;if(!t){if(null==(e=o&&o.length?Ae(e,o):e))return;t=e[n]}return null==t?t:t.apply(e,r)})});function xt(e,t){return gt(e,Te(t))}function kt(e,r,t){var n,o,i=-1/0,a=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof e[0]&&null!=e)for(var u=0,c=(e=et(e)?e:me(e)).length;u<c;u++)null!=(n=e[u])&&i<n&&(i=n);else r=De(r,t),pt(e,function(e,t,n){o=r(e,t,n),(a<o||o===-1/0&&i===-1/0)&&(i=e,a=o)});return i}function _t(e,t,n){if(null==t||n)return(e=!et(e)?me(e):e)[Ne(e.length-1)];var r=(et(e)?Se:me)(e),e=Q(r);t=Math.max(Math.min(t,e),0);for(var o=e-1,i=0;i<t;i++){var a=Ne(i,o),u=r[i];r[i]=r[a],r[a]=u}return r.slice(0,t)}function It(i,t){return function(n,r,e){var o=t?[[],[]]:{};return r=De(r,e),pt(n,function(e,t){t=r(e,t,n);i(o,e,t)}),o}}var u=It(function(e,t,n){B(e,n)?e[n].push(t):e[n]=[t]}),t=It(function(e,t,n){e[n]=t}),se=It(function(e,t,n){B(e,n)?e[n]++:e[n]=1}),ce=It(function(e,t,n){e[n?0:1].push(t)},!0),St=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function jt(e,t,n){return t in n}var Et=b(function(e,t){var n={},r=t[0];if(null==e)return n;F(r)?(1<t.length&&(r=Fe(r,t[1])),t=ie(e)):(r=jt,t=tt(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var a=t[o],u=e[a];r(u,a,e)&&(n[a]=u)}return n}),le=b(function(e,n){var t,r=n[0];return F(r)?(r=it(r),1<n.length&&(t=n[1])):(n=gt(tt(n,!1,!1),String),r=function(e,t){return!wt(n,t)}),Et(e,r,t)});function At(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function $t(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:At(e,e.length-t)}function Ct(e,t,n){return c.call(e,null==t||n?1:t)}var Ot=b(function(e,t){return t=tt(t,!0,!0),mt(e,function(e){return!wt(t,e)})}),D=b(function(e,t){return Ot(e,t)});function Tt(e,t,n,r){k(t)||(r=n,n=t,t=!1),null!=n&&(n=De(n,r));for(var o=[],i=[],a=0,u=Q(e);a<u;a++){var c=e[a],s=n?n(c,a,e):c;t&&!n?(a&&i===s||o.push(c),i=s):n?wt(i,s)||(i.push(s),o.push(c)):wt(o,c)||o.push(c)}return o}de=b(function(e){return Tt(tt(e,!0,!0))});function Ft(e){for(var t=e&&kt(e,Q).length||0,n=Array(t),r=0;r<t;r++)n[r]=xt(e,r);return n}ze=b(Ft);function Lt(e,t){return e._chain?te(t).chain():t}function Rt(n){return pt(be(n),function(e){var t=te[e]=n[e];te.prototype[e]=function(){var e=[this._wrapped];return o.apply(e,arguments),Lt(this,t.apply(te,e))}}),te}pt(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=r[t];te.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),Lt(this,e)}}),pt(["concat","join","slice"],function(e){var t=r[e];te.prototype[e]=function(){var e=this._wrapped;return Lt(this,e=null!=e?t.apply(e,arguments):e)}});ze=Rt({__proto__:null,VERSION:"1.13.1",restArguments:b,isObject:w,isNull:function(e){return null===e},isUndefined:x,isBoolean:k,isElement:function(e){return!(!e||1!==e.nodeType)},isString:I,isNumber:S,isDate:j,isRegExp:E,isError:A,isSymbol:$,isArrayBuffer:C,isDataView:N,isArray:M,isFunction:F,isArguments:U,isFinite:function(e){return!$(e)&&g(e)&&!isNaN(parseFloat(e))},isNaN:q,isTypedArray:Y,isEmpty:function(e){if(null==e)return!0;var t=Q(e);return"number"==typeof t&&(M(e)||I(e)||U(e))?0===t:0===Q(Z(e))},isMatch:ee,isEqual:function(e,t){return oe(e,t)},isMap:he,isWeakMap:pe,isSet:ge,isWeakSet:ve,keys:Z,allKeys:ie,values:me,pairs:function(e){for(var t=Z(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r},invert:ye,functions:be,methods:be,extend:xe,extendOwn:ke,assign:ke,defaults:_e,create:function(e,t){return e=Ie(e),t&&ke(e,t),e},clone:Se,tap:function(e,t){return t(e),e},get:$e,has:function(e,t){for(var n=(t=Ee(t)).length,r=0;r<n;r++){var o=t[r];if(!B(e,o))return!1;e=e[o]}return!!n},mapObject:function(e,t,n){t=De(t,n);for(var r=Z(e),o=r.length,i={},a=0;a<o;a++){var u=r[a];i[u]=t(e[u],u,e)}return i},identity:Ce,constant:K,noop:Pe,toPath:je,property:Te,propertyOf:function(t){return null==t?Pe:function(e){return $e(t,e)}},matcher:Oe,matches:Oe,times:function(e,t,n){var r=Array(Math.max(0,e));t=Fe(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r},random:Ne,now:Me,escape:Ue,unescape:qe,templateSettings:Ke,template:function(i,e,t){e=_e({},e=!e&&t?t:e,te.templateSettings);var n,t=RegExp([(e.escape||We).source,(e.interpolate||We).source,(e.evaluate||We).source].join("|")+"|$","g"),a=0,u="__p+='";if(i.replace(t,function(e,t,n,r,o){return u+=i.slice(a,o).replace(Je,Ge),a=o+e.length,t?u+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?u+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(u+="';\n"+r+"\n__p+='"),e}),u+="';\n",t=e.variable){if(!Ve.test(t))throw new Error("variable is not a bare identifier: "+t)}else u="with(obj||{}){\n"+u+"}\n",t="obj";u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{n=new Function(t,"_",u)}catch(e){throw e.source=u,e}return(e=function(e){return n.call(this,e,te)}).source="function("+t+"){\n"+u+"}",e},result:function(e,t,n){var r=(t=Ee(t)).length;if(!r)return F(n)?n.call(e):n;for(var o=0;o<r;o++){var i=null==e?void 0:e[t[o]];void 0===i&&(i=n,o=r),e=F(i)?i.call(e):i}return e},uniqueId:function(e){var t=++Ye+"";return e?e+t:t},chain:function(e){return(e=te(e))._chain=!0,e},iteratee:Re,partial:Xe,bind:Ze,bindAll:nt,memoize:function(r,o){function i(e){var t=i.cache,n=""+(o?o.apply(this,arguments):e);return B(t,n)||(t[n]=r.apply(this,arguments)),t[n]}return i.cache={},i},delay:rt,defer:ot,throttle:function(n,r,o){var i,a,u,c,s=0;function l(){s=!1===o.leading?0:Me(),i=null,c=n.apply(a,u),i||(a=u=null)}function e(){var e=Me();s||!1!==o.leading||(s=e);var t=r-(e-s);return a=this,u=arguments,t<=0||r<t?(i&&(clearTimeout(i),i=null),s=e,c=n.apply(a,u),i||(a=u=null)):i||!1===o.trailing||(i=setTimeout(l,t)),c}return o=o||{},e.cancel=function(){clearTimeout(i),s=0,i=a=u=null},e},debounce:function(t,n,r){function o(){var e=Me()-a;e<n?i=setTimeout(o,n-e):(i=null,r||(c=t.apply(s,u)),i||(u=s=null))}var i,a,u,c,s,e=b(function(e){return s=this,u=e,a=Me(),i||(i=setTimeout(o,n),r&&(c=t.apply(s,u))),c});return e.cancel=function(){clearTimeout(i),i=u=s=null},e},wrap:function(e,t){return Xe(t,e)},negate:it,compose:function(){var n=arguments,r=n.length-1;return function(){for(var e=r,t=n[r].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:at,once:e,findKey:ut,findIndex:st,findLastIndex:T,sortedIndex:lt,indexOf:dt,lastIndexOf:O,find:ht,detect:ht,findWhere:function(e,t){return ht(e,Oe(t))},each:pt,forEach:pt,map:gt,collect:gt,reduce:i,foldl:i,inject:i,reduceRight:L,foldr:L,filter:mt,select:mt,reject:function(e,t,n){return mt(e,it(De(t)),n)},every:yt,all:yt,some:bt,any:bt,contains:wt,includes:wt,include:wt,invoke:P,pluck:xt,where:function(e,t){return mt(e,Oe(t))},max:kt,min:function(e,r,t){var n,o,i=1/0,a=1/0;if(null==r||"number"==typeof r&&"object"!=typeof e[0]&&null!=e)for(var u=0,c=(e=et(e)?e:me(e)).length;u<c;u++)null!=(n=e[u])&&n<i&&(i=n);else r=De(r,t),pt(e,function(e,t,n){((o=r(e,t,n))<a||o===1/0&&i===1/0)&&(i=e,a=o)});return i},shuffle:function(e){return _t(e,1/0)},sample:_t,sortBy:function(e,r,t){var o=0;return r=De(r,t),xt(gt(e,function(e,t,n){return{value:e,index:o++,criteria:r(e,t,n)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")},groupBy:u,indexBy:t,countBy:se,partition:ce,toArray:function(e){return e?M(e)?c.call(e):I(e)?e.match(St):et(e)?gt(e,Ce):me(e):[]},size:function(e){return null==e?0:(et(e)?e:Z(e)).length},pick:Et,omit:le,first:$t,head:$t,take:$t,initial:At,last:function(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Ct(e,Math.max(0,e.length-t))},rest:Ct,tail:Ct,drop:Ct,compact:function(e){return mt(e,Boolean)},flatten:function(e,t){return tt(e,t,!1)},without:D,uniq:Tt,unique:Tt,union:de,intersection:function(e){for(var t=[],n=arguments.length,r=0,o=Q(e);r<o;r++){var i=e[r];if(!wt(t,i)){for(var a=1;a<n&&wt(arguments[a],i);a++);a===n&&t.push(i)}}return t},difference:Ot,unzip:Ft,transpose:Ft,zip:ze,object:function(e,t){for(var n={},r=0,o=Q(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},range:function(e,t,n){null==t&&(t=e||0,e=0),n=n||(t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;i<r;i++,e+=n)o[i]=e;return o},chunk:function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(c.call(e,r,r+=t));return n},mixin:Rt,default:te});return ze._=ze},"object"==typeof i&&void 0!==o?o.exports=t():"function"==typeof define&&define.amd?define("underscore",t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e._,(r=e._=t()).noConflict=function(){return e._=n,r})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
//# sourceMappingURL=client.map